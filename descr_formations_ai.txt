;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;DARTH_Dark_FORMATIONS_17.0(DARTH_MOD_Version);;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;	
;	This file describes the unit group formation templates, any number of group formations can be specified
;	these templates are used to give a group of units a formation, the units available  in the group may not	
;	totally fit the template in which case a best-fit is determined when the formation is created
;	
;	Formation block positions can either be specified with a relative normalised (x,z) or they can be specified
;	relative to another formation block (when specifying in this manner rotation CANNOT be given)
;	a formation must be described entirely in one method or the other
;
;							
;	formation						the name given to this formation template
;
;	formation purposes				hints to ai for using this formation
;
;	ai_priority						hint to the ai, denotes priority of using this template
;
;	BLOCK SPEC
;
;	unit_type						specifies units that can be allocated to the block
;									either : -
;												any
;												phalanx
;												non_phalanx_spear
;												chanting_screeching
;												ranged_missile_infantry
;												elephants
;												heavy_chariots
;												pilum_infantry
;												<UNIT_CLASS> <UNIT_CATEGORY> <PRIORITY>
;									the priority dictates the order of assigning different unit types
;									a priority of zero means that type will only ever be assigned to this block
;									to fulfill block minimums
;	default_melee_state <OPTIONAL>	the melee state that will be assigned to units
;									in the formation
;	unit_formation					the formation the units within this block will be in (wedge, square, ...)
;	unit_density					either loose or close
;	block_formation					the formation to organise the block into	(square, column, line)
;	normalised_pos					(x,z) position relative to the center of the template (in normalised coords)
;	normalised_rot					rotation in degress relative to the orientation of the template															
;	block_relative_pos				b x z (x,z) position (in metres) relative to formation block b		
;	inter_unit_spacing				distance to space units (in metres) 
;	priority						dictates the order in which units are assigned to the block



;(AI purposes)
begin_formation ai_gen_line
	;;; purpose flags
        attack													; can use this for anything
	defend
	ai_priority			0.001



		;; First line of infantry
		begin_block 0
			min_units			3
                        not_general
			unit_type			light infantry 1.0
                        unit_type			light_pilum_infantry 0.9
			unit_type			heavy_pilum_infantry 0.7
                        unit_type			heavy infantry 0.0
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 1
			min_units			3
                        not_general
			unit_type			heavy_pilum_infantry 1.0
			unit_type			light_pilum_infantry 0.1
                        unit_type			heavy infantry 0.0
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
			block_formation		line
			block_relative_pos	0 0.0 -2.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; 3rd line of infantry
		begin_block 2
			min_units			2
                        not_general
			unit_type			heavy infantry 0.4
			unit_type			spearmen 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
			block_formation		line
			block_relative_pos	1 0.0 -2.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; Archers behind
		begin_block 3
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			non_phalanx_spear 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			block_formation		line
			block_relative_pos	2 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 4
			spans  0 1 2 3
		end_dummy_block

                ; Screen of missile inf
		begin_block 5
                        not_general
			unit_type			missile infantry 0.5
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type			any					0.01
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			;unit_density		close
			block_formation		line
			block_relative_pos	4 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; artillery and handlers at the back
		begin_block 6
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			block_formation		line
			block_relative_pos	4 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 7
                        not_general
			unit_type			cavalry 1.0
			block_formation		line
			block_relative_pos	6 -10.0 -15.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
			block_formation		line
			block_relative_pos	7 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
			block_formation		line
			block_relative_pos	6 10.0 -15.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
			block_formation		line
			block_relative_pos	9 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                begin_dummy_block 11
			spans 0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

                 ;; left flank missile(decides to support the flank more)
		begin_block 12
                        min_units			1
                        max_units			2
                        not_general
                        unit_type			missile infantry 0.5
                        unit_type			missile cavalry 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			block_formation		line
			block_relative_pos	11 -5.0 0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right flank missile(decides to support the flank more)
		begin_block 13
                        min_units			1
                        max_units			2
                        not_general
                        unit_type			missile infantry 0.5
                        unit_type			missile cavalry 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			block_formation		line
			block_relative_pos	11 5.0 0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

;; general at the back
		begin_block 14
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		11 0.0 -10.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation


;(AI purposes)
begin_formation ai_gen_line
;;; purpose flags
        attack													; can use this for anything
	pursue
	ai_priority			0.001


		;; Missile cavalry or Elephants in front
		begin_block 0
                        not_general
			unit_type			missile cavalry		1.0
			unit_type			elephants		3.0
			block_formation		line
			block_relative_pos	0 0.0 0.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

;; Foot Skirmishers follow
		begin_block 1
                        not_general
			unit_type			skirmish infantry		1.0
                        ;unit_formation          square
			block_formation		line
			block_relative_pos	0 0.0 -10.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; The main Infantry line
                begin_block 2
                        min_units			2
                        not_general
			unit_type			infantry		1.0
                        ;unit_formation          square
			block_formation		line
			block_relative_pos	1 0.0 -15.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 3
                        max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			block_formation		column
			block_relative_pos	2 0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 4
                       max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			block_formation		column
			block_relative_pos	2 -0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

		;; general at the back
		begin_block 6
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		5 0.0 -10.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block	


                begin_block 7 ;cavalry will attack right flank
                        not_general
			unit_type			cavalry				1.0
			block_formation		line
			block_relative_pos	5 15 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 8 ;cavalry will attack left flank
                        not_general
			unit_type			cavalry				1.0
			block_formation		line
			block_relative_pos	5 -15 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers and long range missiles behind everyone
		begin_dummy_block 9
			spans 0 1 2 3 4 5 6 7 8
		end_dummy_block

		begin_block 10
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type					ranged_missile_infantry				2.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			block_formation				line
			block_relative_pos			9 0.0 -8.0
			inter_unit_spacing			6.0
			priority					1.0
		end_block
              
end_formation


;***********************************************************************************************
; Roman manipular formation. A really classy formation that wins the day for the AI!
;***********************************************************************************************


begin_formation ai_maniple_line

	;;; purpose flags												; THE FORMATION MARCHES
        march
	ai_priority			0.4
        supported_factions			 romans_julii, romans_brutii, romans_scipii, romans_senate 



                ; Screen of missile inf
		begin_block 0
                        max_units			3
			unit_type			missile infantry 0.9
                        unit_type			elephants 3.0
                        unit_type			heavy_chariots 3.0
                        unit_formation          square, wedge
                        ;min_unit_width			15
                        ;max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			3
                        unit_type			light_pilum_infantry 0.9
			unit_type			heavy_pilum_infantry 0.7
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	0 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 2
			min_units			3
			unit_type			heavy_pilum_infantry 1.0
			unit_type			light_pilum_infantry 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	1 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; 3rd line of infantry(going to the triarii!)
		begin_block 3
			max_units			4
                        unit_type			spearmen 1.0
                        unit_type			light infantry 0.6
			unit_type			heavy infantry 0.6
                        default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
                        unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	2 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; Archers behind
		begin_block 4
			unit_type			ranged_missile_infantry 1.0
                        unit_type			light infantry 0.4
			unit_type			heavy infantry 0.4
			unit_type			spearmen 0.8
                        unit_type			any 0.0
                        unit_formation          square, testudo, phalanx
                        ;unit_formation          square, testudo
                        unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			25
			block_formation		line
			block_relative_pos	3 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 5
			spans  0 1 2 3 4 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 6
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.01
                        unit_formation          square, phalanx
                        ;unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	5 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 7
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	5 -1.0 -1.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 8
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	7 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 9
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	5 1.0 -1.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 10
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	9 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; left flank missile cav
		begin_block 11
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	8 -1.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; left flank missile cav(more)
		begin_block 12
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	11 1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; right_flank missile cav
		begin_block 13
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	10 1.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right_flank missile cav(more)
		begin_block 14
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	12 -1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                       begin_dummy_block 15
			spans 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 
		end_dummy_block

;; general at the back
		begin_block 16
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        unit_type				chariots			3.0
                        unit_type				elephants			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		15 0.0 -20.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation

begin_formation ai_maniple_line

	;;; purpose flags												; can use this for anything
	defend
        march
	ai_priority			0.4
        supported_factions			 romans_julii, romans_brutii, romans_scipii, romans_senate 



                ; Screen of missile inf
		begin_block 0
                        max_units			3
			unit_type			missile infantry 0.9
                        unit_type			elephants 3.0
                        unit_type			heavy_chariots 3.0
                        unit_formation          square, wedge
                        ;min_unit_width			80
                        ;max_unit_width			100
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			3
                        unit_type			light_pilum_infantry 0.9
			unit_type			heavy_pilum_infantry 0.7
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			unit_density		loose, close
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	0 0.0 -6.0
			inter_unit_spacing	25.0
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 2
			min_units			3
			unit_type			heavy_pilum_infantry 1.0
			unit_type			light_pilum_infantry 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			unit_density		loose, close
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -6.0
			inter_unit_spacing	25.0
			priority			1.0
		end_block

		;; 3rd line of infantry(going to the triarii!)
		begin_block 3
			max_units			4
                        unit_type			spearmen 1.0
                        unit_type			light infantry 0.6
			unit_type			heavy infantry 0.6
                        default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
                        unit_density		loose, close
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	2 0.0 -6.0
			inter_unit_spacing	25.0
			priority			1.0
		end_block

		;; Archers behind
		begin_block 4
			unit_type			ranged_missile_infantry 1.0
                        unit_type			light infantry 0.4
			unit_type			heavy infantry 0.4
			unit_type			spearmen 0.8
                        unit_type			any 0.0
                        unit_formation          square, testudo, phalanx
                        ;unit_formation          square, testudo
                        unit_density		loose, close
                        min_unit_width			25
                        max_unit_width			45
			block_formation		line
			block_relative_pos	3 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 5
			spans  0 1 2 3 4 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 6
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.01
                        unit_formation          square, phalanx
                        ;unit_density		close, loose
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 7
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 -1.0 -1.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 8
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 9
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 1.0 -1.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 10
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	9 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; left flank missile cav
		begin_block 11
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	8 -1.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; left flank missile cav(more)
		begin_block 12
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	11 1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; right_flank missile cav
		begin_block 13
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	10 1.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right_flank missile cav(more)
		begin_block 14
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	12 -1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                       begin_dummy_block 15
			spans 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 
		end_dummy_block

;; general at the back
		begin_block 16
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		15 0.0 -20.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation



;the formation attacks and attacks with coordination. Skirmishers are energetic. The general will not risk with close fighting with the enemy.
begin_formation ai_maniple_line

	;;; purpose flags													; can use this for anything
	attack
        march
	ai_priority			0.14
        supported_factions			 romans_julii, romans_brutii, romans_scipii, romans_senate 

		

		; Screen of missile inf
		begin_block 0
                        max_units			3
			unit_type			missile infantry 0.9
                        unit_type			elephants 3.0
                        unit_type			heavy_chariots 3.0
                        default_melee_state	attack
                        unit_formation          square, wedge
                        unit_density		loose, close
                        ;min_unit_width			80
                        ;max_unit_width			120
			block_formation		line
			block_relative_pos	0 0.0 15.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			3
                        unit_type			light_pilum_infantry 0.9
			unit_type			heavy_pilum_infantry 0.7
                        unit_type			heavy infantry 0.0
                        default_melee_state	attack
                        ;unit_formation          square, testudo, wedge, phalanx
                        unit_formation          wedge
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 -35.0
			inter_unit_spacing	45.0
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 2
			min_units			3
			unit_type			heavy_pilum_infantry 1.0
			unit_type			light_pilum_infantry 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	attack
                        ;unit_formation          square, testudo, wedge, phalanx
                        unit_formation          wedge
			unit_density		loose, close
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	1 0.0 -30.0
			inter_unit_spacing	65.0
			priority			1.0
		end_block

		;; 3rd line of infantry(going to the triarii!)
		begin_block 3
			max_units			4
                        unit_type			spearmen 1.0
                        unit_type			light infantry 0.6
			unit_type			heavy infantry 0.6
                        default_melee_state	attack
                        ;unit_formation          square, testudo, wedge, phalanx
                        unit_formation          wedge
                        unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	2 0.0 -30.0
			inter_unit_spacing	85.0
			priority			1.0
		end_block

		;; Archers behind
		begin_block 4
			unit_type			ranged_missile_infantry 1.0
                        unit_type			light infantry 0.4
			unit_type			heavy infantry 0.4
			unit_type			spearmen 0.8
                        unit_type			any 0.0
                        unit_formation          square, testudo, phalanx
                        ;unit_formation          square, testudo
                        unit_density		loose, close
                        min_unit_width			80
                        max_unit_width			120
			block_formation		line
			block_relative_pos	3 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 5
			spans  1 2 3 4 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 6
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.01
                        unit_formation          square, phalanx
                        ;unit_density		close, loose
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 7
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 -10.0 -15.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 8
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	2 10 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 9
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 10.0 -15.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 10
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	2 -10 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; left flank missile cav
		begin_block 11
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	6 -10.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; left flank missile cav(more)
		begin_block 12
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	4 -1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; right_flank missile cav
		begin_block 13
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	6 10.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right_flank missile cav(more)
		begin_block 14
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	4 1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                       begin_dummy_block 15
			spans 1 2 3 4 5 6 7 8 9 10 11 12 13 14 
		end_dummy_block

;; general at the back
		begin_block 16
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		15 0.0 -40.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation


;the multirole swap of the formation will make cavalry to cover flanks than attack and also this applies to foot missiles
begin_formation ai_maniple_line

	;;; purpose flags
        attack													; can use this for anything
	defend
	ai_priority			0.05
        supported_factions			 romans_julii, romans_brutii, romans_scipii, romans_senate 




		
		;; First line of infantry
		begin_block 0
			min_units			3
                        unit_type			light_pilum_infantry 0.9
			unit_type			heavy_pilum_infantry 0.7
                        unit_type			heavy infantry 0.0
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			;unit_density		loose, close
                        min_unit_width			30
                        max_unit_width			40
			block_formation		line
			block_relative_pos	0 0.0 -5.0
			inter_unit_spacing	20.0
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 1
			min_units			3
			unit_type			heavy_pilum_infantry 1.0
			unit_type			light_pilum_infantry 0.1
                        unit_type			heavy infantry 0.0
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			;unit_density		loose, close
                        min_unit_width			30
                        max_unit_width			40
			block_formation		line
			block_relative_pos	0 0.0 -12.0
			inter_unit_spacing	20.0
			priority			1.0
		end_block

		;; 3rd line of infantry(going to the triarii!)
		begin_block 2
			max_units			4
                        unit_type			spearmen 1.0
                        unit_type			light infantry 0.6
			unit_type			heavy infantry 0.6
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
                        ;unit_density		loose, close
                        min_unit_width			30
                        max_unit_width			40
			block_formation		line
			block_relative_pos	1 0.0 -12.0
			inter_unit_spacing	20.0
			priority			1.0
		end_block

		;; Archers behind
		begin_block 3
			unit_type			ranged_missile_infantry 1.0
                        unit_type			light infantry 0.4
			unit_type			heavy infantry 0.4
			unit_type			spearmen 0.8
                        unit_type			any 0.0
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
                        ;unit_density		loose, close
                        min_unit_width			50
                        max_unit_width			80
			block_formation		line
			block_relative_pos	2 0.0 -12.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 4
			spans  0 1 2 3 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 5
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.01
                        unit_formation          square, phalanx
                        ;unit_density		close, loose
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 6
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			40
                        max_unit_width			60
			block_formation		line
			block_relative_pos	4 -10.0 -10.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 7
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			40
                        max_unit_width			60
			block_formation		line
			block_relative_pos	6 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 8
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			40
                        max_unit_width			60
			block_formation		line
			block_relative_pos	4 10.0 -10.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 9
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			40
                        max_unit_width			60
			block_formation		line
			block_relative_pos	8 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; left flank missile cav
		begin_block 10
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			40
                        max_unit_width			60
			block_formation		line
			block_relative_pos	7 -1.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; left flank missile cav(more)
		begin_block 11
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			40
                        max_unit_width			60
			block_formation		line
			block_relative_pos	10 1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; right_flank missile cav
		begin_block 12
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			40
                        max_unit_width			60
			block_formation		line
			block_relative_pos	9 1.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right_flank missile cav(more)
		begin_block 13
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			40
                        max_unit_width			60
			block_formation		line
			block_relative_pos	11 -1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                       begin_dummy_block 14
			spans 0 1 2 3 4 5 6 7 8 9 10 11 12 13 
		end_dummy_block

;; general at the back
		begin_block 15
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		14 0.0 -15.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation

begin_formation ai_maniple_line
;;; purpose flags													; can use this for anything
	pursue
        march
	ai_priority			0.01
        supported_factions			 romans_julii, romans_brutii, romans_scipii, romans_senate 




		
		;; First line of infantry(going to the triarii!)
		begin_block 0
			min_units			3
                        unit_type			spearmen 1.0
                        unit_type			heavy_pilum_infantry 0.5
                        unit_type			heavy infantry 0.4
                        unit_type			light_pilum_infantry 0.1
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	0.2
			priority			2.0
		end_block

		;; second line of infantry
		begin_block 1
			min_units			3
			unit_type			heavy_pilum_infantry 0.8
			unit_type			light_pilum_infantry 0.1
                        unit_type			heavy infantry 1.0
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.5
		end_block

		;; 3rd line of infantry(Light infantry retreats!)
		begin_block 2
			max_units			4
                        unit_type			light infantry 1.0
			unit_type			heavy infantry 0.2
                        unit_type			spearmen 0.01
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
                        unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			30
			block_formation		line
			block_relative_pos	1 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; Archers behind
		begin_block 3
			unit_type			ranged_missile_infantry 1.0
                        unit_type			light infantry 0.4
			unit_type			heavy infantry 0.001
			unit_type			spearmen 0.001
                        unit_type			any 0.0
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
                        unit_density		close, loose
                        min_unit_width			60
                        max_unit_width			80
			block_formation		line
			block_relative_pos	2 0.0 -26.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 4
			spans  0 1 2 3 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 5
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.01
                        unit_formation          square, phalanx
                        ;unit_density		close, loose
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 6
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 -15.0 -10.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 7
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	6 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 8
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 15.0 -10.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 9
			unit_type			cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	8 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; left flank missile cav
		begin_block 10
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	7 -1.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; left flank missile cav(more)
		begin_block 11
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	10 1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; right_flank missile cav
		begin_block 12
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	9 1.0 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right_flank missile cav(more)
		begin_block 13
			unit_type			missile cavalry 1.0
                        unit_formation          phalanx, testudo
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	11 -1 -6.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                       begin_dummy_block 14
			spans 0 1 2 3 4 5 6 7 8 9 10 11 12 13 
		end_dummy_block

;; general at the back
		begin_block 15
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		14 0.0 -25.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation





;*****************************************************************************************************
; Greek Theban formation. The famous angled greek formation that inspired all later phalanx formations(could not be transposed fully so the angle was prohibited)
;*****************************************************************************************************


begin_formation ai_theban_line

	;;; purpose flags												; can use this for anything
        march
	ai_priority			0.01
        supported_factions			 greek_cities



                ;; Left powered line of infantry
		begin_block 0
                        ;not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			15
                        max_unit_width			20
			block_formation		column			
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

		;; The angled line that follows(1)
		begin_block 1
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			15
                        max_unit_width			20
			block_formation		column			
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; The angled line that follows(2)
		begin_block 2
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			15
                        max_unit_width			20
			block_formation		column
			block_relative_pos	1 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; The angled line that follows(3)
		begin_block 3
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			15
                        max_unit_width			20
			block_formation		column
			block_relative_pos	2 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block


		;; support of phalanx left
		begin_block 4
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        min_unit_width			15
                        max_unit_width			20
                        ;unit_formation          square
			block_formation		column
			block_relative_pos	0 -5.0 -9.0
			inter_unit_spacing	5.0
			priority			0.4
		end_block

                ;; support of phalanx right
		begin_block 5
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        min_unit_width			15
                        max_unit_width			20
                        ;unit_formation          square
			block_formation		column
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	5.0
			priority			0.4
		end_block

	
		begin_dummy_block 6
			spans  0 1 2 3 4 5  
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -10.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                ;; general at the back
		begin_block 8
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		7 0.0 -5.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


		;; cavalry on right flank 

		;; right flank cav
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	5 5.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; cavalry on left flank 
		begin_block 10
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 -5.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

               begin_dummy_block 11
			spans  0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

               
		begin_block 12
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	11 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block




end_formation


begin_formation ai_theban_line

	;;; purpose flags												; can use this for anything
	defend
	ai_priority			0.92
        supported_factions			 greek_cities



                ;; Left powered line of infantry
		begin_block 0
                        ;not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			20
                        max_unit_width			30
			block_formation		column			
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

		;; The angled line that follows(1)
		begin_block 1
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			25
                        max_unit_width			25
			block_formation		column			
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; The angled line that follows(2)
		begin_block 2
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			35
                        max_unit_width			40
			block_formation		column
			block_relative_pos	1 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; The angled line that follows(3)
		begin_block 3
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			40
                        max_unit_width			40
			block_formation		column
			block_relative_pos	2 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block


		;; support of phalanx left
		begin_block 4
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        ;unit_formation          square
                        min_unit_width			40
                        max_unit_width			45
			block_formation		column
			block_relative_pos	0 -5.0 -9.0
			inter_unit_spacing	5.0
			priority			0.4
		end_block

                ;; support of phalanx right
		begin_block 5
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        ;unit_formation          square
                        min_unit_width			40
                        max_unit_width			45
			block_formation		column
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	5.0
			priority			0.4
		end_block

	
		begin_dummy_block 6
			spans  0 1 2 3 4 5  
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -10.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                ;; general at the back
		begin_block 8
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		7 0.0 -5.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


		;; cavalry on right flank 

		;; right flank cav
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	5 5.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; cavalry on left flank 
		begin_block 10
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 -5.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                begin_dummy_block 11
			spans  0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

               ; Screen of missile inf
		begin_block 12
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	11 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block




end_formation



;the formation attacks and the phalanx will slowly advance in cover from light infantry and cavalry.
begin_formation ai_theban_line

	;;; purpose flags													; can use this for anything
	attack
        defend
	ai_priority			0.05
        supported_factions			 greek_cities

		

		;; Left powered line of infantry
		begin_block 0
                        ;not_general                   
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			30
                        max_unit_width			30
			block_formation		column
			block_relative_pos	0 0.0 25.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

		;; The angled line that follows(1)
		begin_block 1
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			30
                        max_unit_width			40
			block_formation		column
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; The angled line that follows(2)
		begin_block 2
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			40
                        max_unit_width			50
			block_formation		column
			block_relative_pos	1 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; The angled line that follows(3)
		begin_block 3
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			50
                        max_unit_width			60
			block_formation		column
			block_relative_pos	2 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block


		;; support of phalanx left
		begin_block 4
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			100
			block_formation		column
			block_relative_pos	0 -15.0 -49.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block

                ;; support of phalanx right
		begin_block 5
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			100
			block_formation		column
			block_relative_pos	3 15.0 -49.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block

	
		begin_dummy_block 6
			spans  0 1 2 3 4 5  
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -40.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                 ;; general at the back
		begin_block 8
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		7 0.0 -25.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


		;; cavalry on right flank 

		;; right flank cav
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	5 15.0 -50.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; cavalry on left flank 
		begin_block 10
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 -15.0 -50.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block
                
                begin_dummy_block 11
			spans  0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

               
		begin_block 12
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	11 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block





end_formation


;the multirole swap of the formation will make light infantry to go ahead of the phalanx for skirmishing.Also will make the formation square.
begin_formation ai_theban_line

	;;; purpose flags
        attack													; can use this for anything
	ai_priority			0.01
        supported_factions			 greek_cities




		;; Left powered line of infantry
		begin_block 0
                        ;not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			30
                        max_unit_width			30
			block_formation		column
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

		;; The angled line that follows(1)
		begin_block 1
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			30
                        max_unit_width			30
			block_formation		column
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; The angled line that follows(2)
		begin_block 2
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			30
                        max_unit_width			30
			block_formation		column
			block_relative_pos	1 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; The angled line that follows(3)
		begin_block 3
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			30
                        max_unit_width			30
			block_formation		column
			block_relative_pos	2 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block


		;; support of phalanx left
		begin_block 4
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        ;unit_formation          square
                        min_unit_width			35
                        max_unit_width			40
			block_formation		line
			block_relative_pos	0 -5.0 19.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block

                ;; support of phalanx right
		begin_block 5
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        ;unit_formation          square
                        min_unit_width			35
                        max_unit_width			40
			block_formation		line
			block_relative_pos	3 5.0 -19.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block

	
		begin_dummy_block 6
			spans  0 1 2 3 4 5  
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -10.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                 ;; general at the back
		begin_block 8
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		7 0.0 -15.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


		;; cavalry on right flank 

		;; right flank cav
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			30
                        max_unit_width			60
			block_formation		line
			block_relative_pos	4 5.0 -15.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; cavalry on left flank 
		begin_block 10
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			30
                        max_unit_width			60
			block_formation		line
			block_relative_pos	5 -5.0 -15.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                begin_dummy_block 11
			spans  0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

               
		begin_block 12
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	11 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block





end_formation

begin_formation ai_theban_line
;;; purpose flags												; can use this for anything
	pursue
	ai_priority			0.01
        supported_factions			 greek_cities




		;; Left powered line of infantry
		begin_block 0
                        ;not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			40
                        max_unit_width			40
			block_formation		column
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

		;; The angled line that follows(1)
		begin_block 1
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			40
                        max_unit_width			40
			block_formation		column
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

		;; The angled line that follows(2)
		begin_block 2
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			40
                        max_unit_width			40
			block_formation		column
			block_relative_pos	1 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; The angled line that follows(3)
		begin_block 3
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		loose, close
                        min_unit_width			40
                        max_unit_width			40
			block_formation		column
			block_relative_pos	2 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block


		;; support of phalanx left
		begin_block 4
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			80
			block_formation		column
			block_relative_pos	0 -5.0 29.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block

                ;; support of phalanx right
		begin_block 5
                        not_general
                        unit_type			light infantry 1.0
                        ;unit_type			cavalry 0.2
			unit_type			infantry 0.0
                        unit_type			any 0.1
                        ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			80
			block_formation		column
			block_relative_pos	3 5.0 -29.0
			inter_unit_spacing	0.2
			priority			0.4
		end_block

	
		begin_dummy_block 6
			spans  0 1 2 3 4 5  
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -10.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                 ;; general at the back
		begin_block 8
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		7 0.0 -25.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


		;; cavalry on right flank 

		;; right flank cav
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			80
                        max_unit_width			100
			block_formation		column
			block_relative_pos	4 5.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; cavalry on left flank 
		begin_block 10
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			80
                        max_unit_width			100
			block_formation		column
			block_relative_pos	5 -5.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                begin_dummy_block 11
			spans  0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

               ; Screen of missile inf
		begin_block 12
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	11 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block





end_formation





;****************************************************************************************************************************
; Epigonus battle formation. Similar with macedonian formation but not with so thunderous cavalry charge.More balanced though
;****************************************************************************************************************************


begin_formation ai_epigonus_line

	;;; purpose flags												; can use this for anything
        march
	ai_priority			0.05
        supported_factions			 egypt, seleucid



                ; Screen of missile inf
		begin_block 0
                        not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	0 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			unit_type			non_phalanx_spear 1.0
                        unit_type			ranged_missile_infantry 0.7
                        unit_type			infantry 0.3
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                       ;unit_formation          phalanx
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	1 0.0 -10.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

	
		begin_dummy_block 6
			spans  1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        max_unit_width			15
			block_formation		line
			block_relative_pos	6 0.0 -8.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on right flank will be in priority.

		;; right flank cav
		begin_block 8
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			15
                        max_unit_width			20
			block_formation		square
			block_relative_pos	6 15.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; left flank cav in minority
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        min_unit_width			15
                        max_unit_width			20
			block_formation		square
			block_relative_pos	6 -15.0 -10.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                       begin_dummy_block 10
			spans  0 1 2 3 4 5 6 7 8 9 
		end_dummy_block

;; general at the back
		begin_block 11
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          phalanx, square
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		10 0.0 -2.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation




begin_formation ai_epigonus_line

	;;; purpose flags												; can use this for anything
	defend
	ai_priority			0.4
        supported_factions			 egypt, seleucid



                ; Screen of missile inf
		begin_block 0
                        not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	0 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			unit_type			non_phalanx_spear 1.0
                        unit_type			ranged_missile_infantry 0.7
                        unit_type			infantry 0.3
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                       ;unit_formation          phalanx
                        max_unit_width			30
			block_formation		line
			block_relative_pos	1 0.0 -25.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        ;min_unit_width			15
                        max_unit_width			40
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			40
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

	
		begin_dummy_block 6
			spans  1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
			block_formation		line
			block_relative_pos	6 0.0 -8.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on right flank will be in priority.

		;; right flank cav
		begin_block 8
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        ;min_unit_width			15
                        max_unit_width			40
			block_formation		square
			block_relative_pos	6 15.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; left flank cav in minority
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        ;min_unit_width			15
                        max_unit_width			40
			block_formation		square
			block_relative_pos	6 -15.0 -10.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                       begin_dummy_block 10
			spans  0 1 2 3 4 5 6 7 8 9 
		end_dummy_block

;; general at the back
		begin_block 11
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          phalanx, square
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		10 0.0 -2.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation


;the formation attacks and sends skirmishers to challenge the enemy. The cavalry will cover the phalanx than make an attack.The general will stay well behind.
begin_formation ai_epigonus_line

	;;; purpose flags													; can use this for anything
	attack
	ai_priority			0.4
        supported_factions			 egypt, seleucid

		

		; Screen of missile inf
		begin_block 0
                        not_general
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	0 0.0 20.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			unit_type			missile infantry 1.0
                        unit_type			ranged_missile_infantry 0.7
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          phalanx
                        ;min_unit_width			15
                        max_unit_width			30
			block_formation		line
			block_relative_pos	1 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

	
		begin_dummy_block 6
			spans  1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        ;min_unit_width			15
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on right flank will be in priority.

		;; right flank cav
		begin_block 8
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			30
                        max_unit_width			30
			block_formation		square
			block_relative_pos	6 25.0 -15.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; left flank cav in minority
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        min_unit_width			60
                        max_unit_width			80
			block_formation		square
			block_relative_pos	6 -25.0 -15.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                       begin_dummy_block 10
			spans  0 1 2 3 4 5 6 7 8 9 
		end_dummy_block

;; general at the back
		begin_block 11
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          phalanx, square
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		10 0.0 -15.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation


;the multirole swap of the formation will make cavalry to cover both flanks than attack. Missiles will swap behind. 
begin_formation ai_epigonus_line

	;;; purpose flags
        attack													; can use this for anything
	defend
        march
	ai_priority			0.05
        supported_factions			 egypt, seleucid




		; Screen of missile inf
		begin_block 0
                        not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			60
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	0 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			unit_type			non_phalanx_spear 1.0
                        unit_type			infantry 0.3
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          phalanx
                        ;min_unit_width			60
                        max_unit_width			35
			block_formation		line
			block_relative_pos	1 0.0 -15.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        ;min_unit_width			60
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        ;min_unit_width			60
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

	
		begin_dummy_block 6
			spans  1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        ;min_unit_width			60
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -8.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on right flank will be in priority.

		;; right flank cav
		begin_block 8
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			40
                        max_unit_width			80
			block_formation		square
			block_relative_pos	6 25.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; left flank cav in minority
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        min_unit_width			20
                        max_unit_width			20
			block_formation		square
			block_relative_pos	6 -25.0 -10.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                       begin_dummy_block 10
			spans  0 1 2 3 4 5 6 7 8 9   
		end_dummy_block

;; general at the back
		begin_block 11
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          phalanx, square
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		10 0.0 -14.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                 begin_dummy_block 12
			spans  0 1 2 3 4 5 6 7 8 9 10 11  
		end_dummy_block

                ;; second line of infantry(reserves)
		begin_block 13
                        not_general
                        unit_type			missile infantry 1.0
                        unit_type			ranged_missile_infantry 1.0
                        ;default_melee_state	skirmish
                        unit_formation          square
                        min_unit_width			80
                        max_unit_width			100
			block_formation		line
			block_relative_pos	12 0.0 -20.0
			inter_unit_spacing	10.0
			priority			1.0
		end_block


end_formation

begin_formation ai_epigonus_line
;;; purpose flags													; can use this for anything
	pursue
	ai_priority			0.1
        supported_factions			 egypt, seleucid




		; Screen of missile inf
		begin_block 0
                        not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          wedge
                        ;min_unit_width			80
                        ;max_unit_width			120
			block_formation		line
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
			unit_density		close
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			unit_type			non_phalanx_spear 1.0
                        unit_type			infantry 0.3
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          phalanx
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	1 0.0 -15.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

	
		begin_dummy_block 6
			spans  1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        unit_formation          square
                        ;min_unit_width			15
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -8.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on right flank will be in priority.

		;; right flank cav
		begin_block 8
                        not_general
                        unit_type				heavy cavalry			1.0
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			20
                        max_unit_width			30
			block_formation		square
			block_relative_pos	6 25.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; left flank cav in minority
		begin_block 9
                        not_general
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        min_unit_width			20
                        max_unit_width			30
			block_formation		square
			block_relative_pos	6 -25.0 -10.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                       begin_dummy_block 10
			spans  0 1 2 3 4 5 6 7 8 9   
		end_dummy_block

;; general at the back
		begin_block 11
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          phalanx, square
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		10 0.0 -14.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                 begin_dummy_block 12
			spans  0 1 2 3 4 5 6 7 8 9 10 11  
		end_dummy_block

                ;; second line of infantry(reserves)
		begin_block 13
                        not_general
                        unit_type			missile infantry 1.0
                        unit_type			ranged_missile_infantry 1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			60
                        max_unit_width			120
			block_formation		line
			block_relative_pos	12 0.0 -28.0
			inter_unit_spacing	10.0
			priority			1.0
		end_block


end_formation




;***********************************************************************************************
; Macedonian battle formation. Elephants are in front.The skirmishers/missile units
; form a shield in front of vanguard. Cavalry will launch a devastating charge from the right in semi-wedge formation. The general will lead the attack
;***********************************************************************************************


begin_formation ai_alexanders_line

	;;; purpose flags												; can use this for anything
        march
	ai_priority			0.2
        supported_factions			 macedon



                ; Screen of missile inf
		begin_block 0
                        max_units			2
                        not_general
			unit_type			skirmish infantry 0.9
                        unit_type				chariots			3.5
                        unit_type				elephants			3.5
                        ;default_melee_state	skirmish
                        unit_formation          square
                        ;min_unit_width			80
                        ;max_unit_width			120
			block_formation		line
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        ;not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
                        ;unit_formation          square
			unit_density		loose, close
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	0 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			;unit_type			non_phalanx_spear 0.1
                        unit_type			ranged_missile_infantry 1.0
                        unit_type			infantry 0.3
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	1 0.0 -10.0
			inter_unit_spacing	10.0
			priority			0.1
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.3
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			light infantry 0.8
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

	
		begin_dummy_block 6
			spans  1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        ;min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	6 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on right flank in wedge(ALMOST!)

		;; right flank cav
		begin_block 8
                        min_units			1
                        max_units			1
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        min_unit_width			15
                        max_unit_width			20
                        ;unit_formation          wedge
			block_formation		line
			block_relative_pos	6 15.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; right flank cav(second)
		begin_block 9
                        min_units			2
                        max_units			2
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        min_unit_width			15
                        max_unit_width			20
                        ;unit_formation          wedge
			block_formation		line
			block_relative_pos	8 0 -0.2
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; right flank cav(third)
		begin_block 10
                        min_units			3
                        max_units			3
                        ;not_general
			unit_type			cavalry 1.0
                        min_unit_width			15
                        max_unit_width			20
                        ;unit_formation          wedge
			block_formation		line
			block_relative_pos	9 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right flank cav(4th)
		begin_block 11
                        min_units			1
                        ;not_general
			unit_type			cavalry 1.0
                        min_unit_width			15
                        max_unit_width			20
                        ;unit_formation         wedge
			block_formation		line
			block_relative_pos	10 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.4
		end_block



end_formation


begin_formation ai_alexanders_line

	;;; purpose flags												; can use this for anything
	defend
	ai_priority			0.15
        supported_factions			 macedon



                ; Screen of missile inf
		begin_block 0
                        max_units			2
                        not_general
			unit_type			skirmish infantry 0.9
                        unit_type				chariots			3.5
                        unit_type				elephants			3.5
                        ;default_melee_state	skirmish
                        unit_formation          square
                        ;min_unit_width			80
                        ;max_unit_width			120
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        ;not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        unit_formation          phalanx
                        ;unit_formation          square
			unit_density		loose, close
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	0 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			;unit_type			non_phalanx_spear 0.1
                        unit_type			ranged_missile_infantry 1.0
                        unit_type			infantry 0.3
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square
                        min_unit_width			35
                        max_unit_width			35
			block_formation		line
			block_relative_pos	1 0.0 -10.0
			inter_unit_spacing	10.0
			priority			0.1
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			35
                        max_unit_width			35
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.3
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			light infantry 0.8
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			35
                        max_unit_width			35
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

	
		begin_dummy_block 6
			spans  1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        ;min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on right flank in wedge(ALMOST!)

		;; right flank cav
		begin_block 8
                        min_units			1
                        max_units			1
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        unit_formation          wedge
                        min_unit_width			35
                        max_unit_width			55
			block_formation		line
			block_relative_pos	6 15.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; right flank cav(second)
		begin_block 9
                        min_units			2
                        max_units			2
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        unit_formation          wedge
                        min_unit_width			35
                        max_unit_width			55
			block_formation		line
			block_relative_pos	8 0 -0.2
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; right flank cav(third)
		begin_block 10
                        min_units			3
                        max_units			3
                        ;not_general
			unit_type			cavalry 1.0
                        unit_formation          wedge
                        min_unit_width			35
                        max_unit_width			55
			block_formation		line
			block_relative_pos	9 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right flank cav(4th)
		begin_block 11
                        min_units			1
                        ;not_general
			unit_type			cavalry 1.0
                        unit_formation         wedge
                        min_unit_width			35
                        max_unit_width			55
			block_formation		line
			block_relative_pos	10 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.4
		end_block



end_formation




;the formation attacks and sends skirmishers to challenge the enemy. The cavalry will attack once the phalanx is in position.
begin_formation ai_alexanders_line

	;;; purpose flags													; can use this for anything
	attack
        march
	ai_priority			0.4
        supported_factions			 macedon

		

		; Screen of missile inf
		begin_block 0
                        max_units			2
                        not_general
			unit_type			skirmish infantry 0.9
                        unit_type				chariots			3.5
                        unit_type				elephants			3.5
                        ;default_melee_state	skirmish
                        unit_formation          square
                        ;min_unit_width			100
                        ;max_unit_width			120
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        ;not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
                        ;unit_formation          square
			unit_density		loose, close
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			;unit_type			non_phalanx_spear 0.1
                        unit_type			ranged_missile_infantry 1.0
                        unit_type			infantry 0.3
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square
                        min_unit_width			25
                        max_unit_width			35
			block_formation		line
			block_relative_pos	1 0.0 -35.0
			inter_unit_spacing	10.0
			priority			0.1
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			25
                        max_unit_width			35
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.3
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			light infantry 0.8
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			25
                        max_unit_width			35
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

	
		begin_dummy_block 6
			spans  1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        ;min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on right flank in wedge(ALMOST!)

		;; right flank cav
		begin_block 8
                        min_units			1
                        max_units			1
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        unit_formation          wedge
                        min_unit_width			45
                        max_unit_width			65
			block_formation		line
			block_relative_pos	6 35.0 -45.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; right flank cav(second)
		begin_block 9
                        min_units			2
                        max_units			2
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        unit_formation          wedge
                        min_unit_width			45
                        max_unit_width			65
			block_formation		line
			block_relative_pos	8 0 -0.2
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; right flank cav(third)
		begin_block 10
                        min_units			3
                        max_units			3
                        ;not_general
			unit_type			cavalry 1.0
                        unit_formation         wedge
                        min_unit_width			45
                        max_unit_width			65
			block_formation		line
			block_relative_pos	9 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right flank cav(4th)
		begin_block 11
                        min_units			1
                        ;not_general
			unit_type			cavalry 1.0
                        unit_formation         wedge
                        min_unit_width			45
                        max_unit_width			65
			block_formation		line
			block_relative_pos	10 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.4
		end_block




end_formation


;the multirole swap of the formation will make cavalry to cover both flanks than attack (swap cancelled, will maintain right thunderous charge)
begin_formation ai_alexanders_line

	;;; purpose flags
        attack													; can use this for anything
	defend
	ai_priority			0.05
        supported_factions			 macedon




		; Screen of missile inf
		begin_block 0
                        max_units			2
                        not_general
			unit_type			skirmish infantry 0.9
                        unit_type				chariots			3.5
                        unit_type				elephants			3.5
                        ;default_melee_state	skirmish
                        unit_formation          square
                        ;min_unit_width			80
                        ;max_unit_width			120
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.8
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        ;not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
                        ;unit_formation          square
			unit_density		loose, close
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			unit_type			non_phalanx_spear 0.1
                        unit_type			ranged_missile_infantry 1.0
                        unit_type		;	infantry 0.3
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	1 0.0 -15.0
			inter_unit_spacing	10.0
			priority			0.1
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.3
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			light infantry 0.8
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

	
		begin_dummy_block 6
			spans  0 1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        ;min_unit_width			30
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block



		;; cavalry on right flank in wedge(ALMOST!)

		;; right flank cav
		begin_block 8
                        min_units			1
                        max_units			1
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        unit_formation          wedge
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	6 25.0 -15.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; right flank cav(second)
		begin_block 9
                        min_units			2
                        max_units			2
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        unit_formation          wedge
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	8 0 -0.2
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; right flank cav(third)
		begin_block 10
                        min_units			3
                        max_units			3
                        ;not_general
			unit_type			cavalry 1.0
                        unit_formation          wedge
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	9 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right flank cav(4th)
		begin_block 11
                        min_units			1
                        ;not_general
			unit_type			cavalry 1.0
                        unit_formation         wedge
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	10 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.4
		end_block





end_formation

begin_formation ai_alexanders_line
;;; purpose flags												; can use this for anything
        pursue
	ai_priority			0.15
        supported_factions			 macedon




		; Screen of missile inf
		begin_block 0
                        max_units			2
                        not_general
			unit_type			skirmish infantry 0.9
                        unit_type				chariots			3.5
                        unit_type				elephants			3.5
                        ;default_melee_state	skirmish
                        unit_formation          square
                        ;min_unit_width			80
                        ;max_unit_width			120
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.8
			priority			1.0
		end_block

		;; First line of infantry
		begin_block 1
			min_units			8
                        ;not_general
                        unit_type			phalanx 1.0
                        unit_type			spearmen 0.1
                        unit_type			heavy infantry 0.0
                        default_melee_state	defend
                        ;unit_formation          phalanx
                        ;unit_formation          square
			unit_density		loose, close
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	0 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry(reserves)
		begin_block 2
                        not_general
			;unit_type			non_phalanx_spear 0.5
                        unit_type			ranged_missile_infantry 1.0
                        unit_type			infantry 0.3
                        unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square
                        min_unit_width			30
                        max_unit_width			40
			block_formation		line
			block_relative_pos	1 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.1
		end_block

                begin_dummy_block 3
			spans  1 2  
		end_dummy_block

		;; right wing cover
		begin_block 4
                        not_general
                        unit_type			light infantry 0.5
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			60
                        max_unit_width			60
			block_formation		line
			block_relative_pos	3 5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.3
		end_block

                ;; left wing cover
		begin_block 5
                        not_general
                        unit_type			light infantry 0.8
                        unit_type			non_phalanx_spear 1.0
                        ;unit_type			cavalry 0.2
			unit_type			spearmen 0.0
                        unit_formation          square
                        min_unit_width			60
                        max_unit_width			60
			block_formation		line
			block_relative_pos	3 -5.0 -9.0
			inter_unit_spacing	0.2
			priority			0.7
		end_block

	
		begin_dummy_block 6
			spans  0 1 2 3 4 5 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.0
                        ;unit_formation          square
                        ;min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block



		;; cavalry on right flank in wedge(ALMOST!)

		;; right flank cav
		begin_block 8
                        min_units			1
                        max_units			1
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.4
			unit_type			cavalry 0.3
                        unit_formation          wedge
                        min_unit_width			60
                        max_unit_width			60
			block_formation		line
			block_relative_pos	6 25.0 -25.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; right flank cav(second)
		begin_block 9
                        min_units			2
                        max_units			2
                        ;not_general
                        unit_type				spearmen cavalry		1.0
                        unit_type				heavy cavalry			0.8
		        unit_type				light cavalry			0.3
			unit_type			cavalry 0.2
                        unit_formation          wedge
                        min_unit_width			60
                        max_unit_width			60
			block_formation		line
			block_relative_pos	8 0 -0.2
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; right flank cav(third)
		begin_block 10
                        min_units			3
                        max_units			3
                        ;not_general
			unit_type			cavalry 1.0
                        unit_formation          wedge
                        min_unit_width			60
                        max_unit_width			60
			block_formation		line
			block_relative_pos	9 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right flank cav(4th)
		begin_block 11
                        min_units			1
                        ;not_general
			unit_type			cavalry 1.0
                        unit_formation         wedge
                        min_unit_width			60
                        max_unit_width			60
			block_formation		line
			block_relative_pos	10 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.4
		end_block

end_formation








;***********************************************************************************************
; Carthaginian battle formation. Elephants are in front.The skirmishers/missile units
; form a shield in front of vanguard. Cavalry on the flanks. A resilient formation
;***********************************************************************************************


begin_formation ai_carthage_line

	;;; purpose flags												; can use this for anything
        march
	ai_priority			0.15
        supported_factions			 carthage



                begin_block 0
                        not_general
			unit_type			skirmish infantry		1.0
                        unit_type			light infantry		0.8
                        unit_formation          square
                        ;default_melee_state	fire_at_will
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	0 0.0 -10.0 
			inter_unit_spacing	2.0
			priority			1.0
		end_block


		;; The main troop line. Spearmen will form a mass.
		begin_block 1
                        not_general
                        unit_type			phalanx        	2.0
			unit_type			non_phalanx_spear	0.7
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	defend
                        ;unit_formation          phalanx
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	0 0.0 -5.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 2
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			20
			block_formation		column
			block_relative_pos	1 1.0 -8.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 3
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			20
			block_formation		column
			block_relative_pos	1 -1.0 -8.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 4
			spans 0 1 2 3 
		end_dummy_block

                ;; right missile units
		begin_block 5
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 6
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 -2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                ;; Spearmen will form a back up force.
		begin_block 7
                        min_units			1
                        not_general
			unit_type			non_phalanx_spear	1.0
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 0.0 -5.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                begin_dummy_block 8
			spans 0 1 2 3 4 5 6 7 
		end_dummy_block


		;; general at the back
		begin_block 9
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        unit_formation          square
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		8 0.0 -10.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_block 10
                        not_general
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;default_melee_state	fire_at_will
                        ;default_melee_state	defend
                        unit_formation          phalanx
			unit_density		loose
                        ;min_unit_width			60
                        ;max_unit_width			60
			block_formation		line
			block_relative_pos	0 0.0 8.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block	


                begin_block 11 ;cavalry right
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			15
                        max_unit_width			20
			block_formation		square
			block_relative_pos	8 7 -3.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 12 ;cavalry left
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			15
                        max_unit_width			20
			block_formation		square
			block_relative_pos	8 -7 -3.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 13
			spans 0 1 2 3 4 5 6 7 8 9 10 11 12
		end_dummy_block

		begin_block 14
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        unit_formation          square
                        ;min_unit_width			15
                        max_unit_width			25
			block_formation				line
			block_relative_pos			13 0.0 -2.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block
              
end_formation


begin_formation ai_carthage_line

	;;; purpose flags												; can use this for anything
	defend
        march
	ai_priority			0.15
        supported_factions			 carthage



                begin_block 0
                        not_general
			unit_type			skirmish infantry		1.0
                        unit_type			light infantry		0.8
                        unit_formation          square
                        ;default_melee_state	fire_at_will
                        min_unit_width			60
                        max_unit_width			120
			block_formation		line
			block_relative_pos	0 0.0 0.0 
			inter_unit_spacing	2.0
			priority			1.0
		end_block


		;; The main troop line. Spearmen will form a mass.
		begin_block 1
                        not_general
                        unit_type			phalanx        	2.0
			unit_type			non_phalanx_spear	0.7
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        default_melee_state	defend
                        ;unit_formation          phalanx
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 -5.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 2
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			30
			block_formation		column
			block_relative_pos	1 1.0 -8.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 3
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			30
			block_formation		column
			block_relative_pos	1 -1.0 -8.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 4
			spans 0 1 2 3 
		end_dummy_block

                ;; right missile units
		begin_block 5
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			45
                        max_unit_width			50
			block_formation		line
			block_relative_pos	4 2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 6
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			45
                        max_unit_width			50
			block_formation		line
			block_relative_pos	4 -2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                ;; Spearmen will form a back up force.
		begin_block 7
                        min_units			1
                        not_general
			unit_type			non_phalanx_spear	1.0
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	4 0.0 -5.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                begin_dummy_block 8
			spans 0 1 2 3 4 5 6 7 
		end_dummy_block


		;; general at the back
		begin_block 9
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        unit_formation          square
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		8 0.0 -10.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_block 10
                        not_general
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;default_melee_state	fire_at_will
                        ;default_melee_state	defend
                        unit_formation          phalanx
			unit_density		loose
                        ;min_unit_width			60
                        ;max_unit_width			60
			block_formation		line
			block_relative_pos	0 0.0 8.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block	


                begin_block 11 ;cavalry right
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			35
                        max_unit_width			40
			block_formation		square
			block_relative_pos	8 7 -3.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 12 ;cavalry left
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			35
                        max_unit_width			40
			block_formation		square
			block_relative_pos	8 -7 -3.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 13
			spans 0 1 2 3 4 5 6 7 8 9 10 11 12
		end_dummy_block

		begin_block 14
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        unit_formation          square
                        ;min_unit_width			25
                        max_unit_width			25
			block_formation				line
			block_relative_pos			13 0.0 -2.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block
              
end_formation

;the formation attacks and attacks with coordination. No real skirmishing but really punishing missile attack.The Elephants will be a covering powerful force.Lively flanking
begin_formation ai_carthage_line

	;;; purpose flags													; can use this for anything
	attack
	ai_priority			0.3
        supported_factions			 carthage

		

		;; If there are elephants, skirmishers will follow them to support them.
		begin_block 0
                        not_general
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;default_melee_state	fire_at_will
                        ;default_melee_state	defend
                        unit_formation          phalanx
			unit_density		loose
                        ;min_unit_width			60
                        ;max_unit_width			60
			block_formation		line
			block_relative_pos	0 0.0 -20.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

                begin_block 1
                        not_general
			unit_type			skirmish infantry		1.0
                        unit_type			light infantry		0.8
                        ;default_melee_state	fire_at_will
                        unit_formation          square
                        min_unit_width			80
                        max_unit_width			100
			block_formation		line
			block_relative_pos	0 0.0 -3.0 
			inter_unit_spacing	2.0
			priority			1.0
		end_block



		;; The main troop line. Spearmen will form a mass.
		begin_block 2
                        not_general
                        unit_type			phalanx        	2.0
			unit_type			non_phalanx_spear	0.7
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	defend
                        ;unit_formation          phalanx
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	1 0.0 -5.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 3
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			45
                        max_unit_width			50
			block_formation		column
			block_relative_pos	2 1.0 -15.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 4
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			45
                        max_unit_width			50
			block_formation		column
			block_relative_pos	2 -1.0 -15.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 5
			spans 0 1 2 3 4 
		end_dummy_block

                ;; right missile units
		begin_block 6
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			100
			block_formation		line
			block_relative_pos	5 2.0 -20.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 7
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			100
			block_formation		line
			block_relative_pos	5 -2.0 -20.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                ;; Spearmen will form a back up force.
		begin_block 8
                        min_units			1
                        not_general
			unit_type			non_phalanx_spear	1.0
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	5 0.0 -30.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                begin_dummy_block 9
			spans 0 1 2 3 4 5 6 7 8 
		end_dummy_block


		;; general at the back
		begin_block 10
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        unit_formation          square
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		9 0.0 -30.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block	


                begin_block 11 ;cavalry right
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			25
                        max_unit_width			30
			block_formation		square
			block_relative_pos	9 17 -30.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 12 ;cavalry left
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			25
                        max_unit_width			30
			block_formation		square
			block_relative_pos	9 -17 -30.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 13
			spans 0 1 2 3 4 5 6 7 8 9 10 11 12 
		end_dummy_block

		begin_block 14
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        ;min_unit_width			25
                        max_unit_width			25
			block_formation				line
			block_relative_pos			13 0.0 -10.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block
              
end_formation





;the multirole swap of the formation will make cavalry to cover flanks than attack and also this applies to foot missiles
begin_formation ai_carthage_line

	;;; purpose flags
        attack													; can use this for anything
	defend
        march
	ai_priority			0.15
        supported_factions			 carthage




		;; If there are elephants, infantry will follow them to support them.
		begin_block 0
                        not_general
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;default_melee_state	fire_at_will
                        ;default_melee_state	defend
                        unit_formation          phalanx
			unit_density		loose
                        ;min_unit_width			60
                        ;max_unit_width			60
			block_formation		line
			block_relative_pos	0 0.0 0.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block


		;; The main troop line. Spearmen will form a mass.
		begin_block 1
                        not_general
                        unit_type			phalanx        	2.0
			unit_type			non_phalanx_spear	0.7
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        default_melee_state	defend
                        ;unit_formation          phalanx
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 -5.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 2
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		column
			block_relative_pos	1 1.0 -10.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 3
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		column
			block_relative_pos	1 -1.0 -10.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 4
			spans 0 1 2 3 
		end_dummy_block

                ;; right missile units
		begin_block 5
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			45
                        max_unit_width			50
			block_formation		line
			block_relative_pos	4 2.0 -10.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 6
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			45
                        max_unit_width			50
			block_formation		line
			block_relative_pos	4 -2.0 -10.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                ;; Spearmen will form a back up force.
		begin_block 7
                        min_units			1
                        not_general
			unit_type			non_phalanx_spear	1.0
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			45
                        max_unit_width			50
			block_formation		line
			block_relative_pos	4 0.0 -5.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                begin_dummy_block 8
			spans 0 1 2 3 4 5 6 7 
		end_dummy_block


		;; general at the back
		begin_block 9
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        unit_formation          square
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		8 0.0 -15.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block	


                begin_block 10 ;cavalry right
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			60
                        max_unit_width			60
			block_formation		square
			block_relative_pos	8 17 -15.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 11 ;cavalry left
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			60
                        max_unit_width			60
			block_formation		square
			block_relative_pos	8 -17 -15.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

		begin_block 13
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			60
                        max_unit_width			60
			block_formation				line
			block_relative_pos			12 0.0 -2.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block
              
end_formation

begin_formation ai_carthage_line
;;; purpose flags												; can use this for anything
	pursue
	ai_priority			0.15
        supported_factions			 carthage




		;; If there are elephants, infantry will follow them to support them.
		begin_block 0
                        not_general
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;default_melee_state	fire_at_will
                        ;default_melee_state	defend
                        unit_formation          phalanx
			unit_density		loose
                        ;min_unit_width			120
                        ;max_unit_width			120
			block_formation		line
			block_relative_pos	0 0.0 0.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block


		;; The main troop line. Spearmen will form a mass.
		begin_block 1
                        not_general
                        unit_type			phalanx        	2.0
			unit_type			non_phalanx_spear	0.7
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	defend
                        ;unit_formation          phalanx
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 -5.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 2
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		column
			block_relative_pos	1 1.0 -10.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 3
                        min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        unit_formation          square, testudo
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		column
			block_relative_pos	1 -1.0 -10.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 4
			spans 0 1 2 3 
		end_dummy_block

                ;; right missile units
		begin_block 5
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			120
                        max_unit_width			120
			block_formation		line
			block_relative_pos	4 2.0 -20.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 6
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        min_unit_width			120
                        max_unit_width			120
			block_formation		line
			block_relative_pos	4 -2.0 -20.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                ;; Spearmen will form a back up force.
		begin_block 7
                        min_units			1
                        not_general
			unit_type			non_phalanx_spear	1.0
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			40
                        max_unit_width			40
			block_formation		line
			block_relative_pos	4 0.0 -5.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                begin_dummy_block 8
			spans 0 1 2 3 4 5 6 7 
		end_dummy_block


		;; general at the back
		begin_block 9
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        unit_formation          square
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		8 0.0 -25.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block	


                begin_block 10 ;cavalry right
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			80
                        max_unit_width			80
			block_formation		square
			block_relative_pos	8 17 -15.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 11 ;cavalry left
                        not_general
			unit_type			cavalry				1.0
			;unit_density		close
                        min_unit_width			80
                        max_unit_width			80
			block_formation		square
			block_relative_pos	8 -17 -15.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

		begin_block 13
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        ;min_unit_width			25
                        max_unit_width			25
			block_formation				line
			block_relative_pos			12 0.0 -12.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block
              
end_formation





;**************************************************************************************************************************************
; Nomad formation. A really punishing formation for armies that use horse archery. Constant skirmishing and movement is main AI purpose.
;**************************************************************************************************************************************


begin_formation ai_nomadic_line

	;;; purpose flags													; can use this for anything
        march
	ai_priority			0.7
        supported_factions			 scythia


		;; the support cavalry (ready to charge where is needed)
		begin_block 0
                        min_units			2
                        max_units			4
                        not_general
                       unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	0 0.0 -30.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

                begin_dummy_block 1											
		spacer 50.0 50.0 50 50
	end_dummy_block

                ;; The center will consist infantry in mixed formations
		begin_block 2
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        ;unit_formation          shield_wall
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	1 0.0 -6.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block


	        ;; general at the center
		begin_block 3
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          shield_wall
			;unit_density			close
			block_formation			line
			block_relative_pos		2 0.0 -7.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_block 4
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        ;min_unit_width			15
                        ;max_unit_width			15
			block_formation				line
			block_relative_pos			3 5.0 0.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block

               begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

               ;; The center will consist infantry in mixed formations (2)
		begin_block 6
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_type			any			0.01
                        ;unit_formation          shield_wall
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	5 0.0 -3.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Cavalry ambush left
		begin_block 7
                        not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	1 -25.0 0.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 8
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	7 0.0 -3.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                 ;; Cavalry ambush right
		begin_block 9
                      not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	1 25.0 0.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 10
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	9 0.0 -3.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block


end_formation


begin_formation ai_nomadic_line

	;;; purpose flags													; can use this for anything
	defend
        march
	ai_priority			0.1
        supported_factions			 scythia


		;; the support cavalry (ready to charge where is needed)
		begin_block 0
                        min_units			2
                        max_units			4
                        not_general
                       unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                        ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -20.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

                begin_dummy_block 1											
		spacer 50.0 50.0 50 50
	end_dummy_block

                ;; The center will consist infantry in mixed formations
		begin_block 2
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_formation          shield_wall
                        min_unit_width			35
                        max_unit_width			35
			block_formation		line
			block_relative_pos	1 0.0 -6.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block


	        ;; general at the center
		begin_block 3
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          shield_wall
			;unit_density			close
			block_formation			line
			block_relative_pos		2 0.0 -7.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_block 4
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        ;min_unit_width			25
                        ;max_unit_width			25
			block_formation				line
			block_relative_pos			3 5.0 0.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block

               begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

               ;; The center will consist infantry in mixed formations (2)
		begin_block 6
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_type			any			0.01
                        unit_formation          shield_wall
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 0.0 -3.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Cavalry ambush left
		begin_block 7
                        not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			60
                        max_unit_width			60
			block_formation		line
			block_relative_pos	1 -25.0 0.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 8
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			60
                        max_unit_width			60
			block_formation		line
			block_relative_pos	7 0.0 -3.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                 ;; Cavalry ambush right
		begin_block 9
                      not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			120
                        max_unit_width			120
			block_formation		line
			block_relative_pos	1 25.0 0.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 10
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			120
                        max_unit_width			120
			block_formation		line
			block_relative_pos	9 0.0 -3.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block


end_formation

;The formation will not change. Same strategy will be used also.Just for AI purposes it is produced(included some offsets for more cautious AI attack).The AI will curse human army with endless missile rain and pointless chase.
begin_formation ai_nomadic_line

	;;; purpose flags													; can use this for anything
	attack
        march
	ai_priority			0.01
        supported_factions			 scythia

		

		;; the support cavalry (ready to charge where is needed)
		begin_block 0
                        min_units			2
                        max_units			4
                        not_general
                       unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                ;unit_formation          square
                        min_unit_width			35
                        max_unit_width			35
			block_formation		line
			block_relative_pos	0 0.0 -30.0 
			inter_unit_spacing	30.0
			priority			1.0
		end_block

                  begin_dummy_block 1											
		spacer 50.0 50.0 50 50
	end_dummy_block


                ;; The center will consist infantry in mixed formations
		begin_block 2
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_formation          shield_wall
                        min_unit_width			50
                        max_unit_width			50
			block_formation		line
			block_relative_pos	1 0.0 -6.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block


	        ;; general at the center
		begin_block 3
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          shield_wall
			;unit_density			close
			block_formation			line
			block_relative_pos		2 0.0 -38.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_block 4
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        ;min_unit_width			25
                        ;max_unit_width			25
			block_formation				line
			block_relative_pos			3 5.0 0.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block

               begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

               ;; The center will consist infantry in mixed formations (2)
		begin_block 6
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_type			any			0.01
                        unit_formation          shield_wall
                        min_unit_width			40
                        max_unit_width			40
			block_formation		line
			block_relative_pos	5 0.0 -3.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Cavalry ambush left
		begin_block 7
                        not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			120
                        max_unit_width			120
			block_formation		line
			block_relative_pos	1 -25.0 -25.0 
			inter_unit_spacing	20.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 8
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			35
                        max_unit_width			35
			block_formation		line
			block_relative_pos	7 0.0 -3.0 
			inter_unit_spacing	15.0
			priority			0.5
		end_block

                 ;; Cavalry ambush right
		begin_block 9
                      not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			120
                        max_unit_width			120
			block_formation		line
			block_relative_pos	1 25.0 -25.0 
			inter_unit_spacing	20.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 10
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			35
                        max_unit_width			35
			block_formation		line
			block_relative_pos	9 0.0 -3.0 
			inter_unit_spacing	15.0
			priority			0.5
		end_block


end_formation

begin_formation ai_nomadic_line

	;;; purpose flags
        attack													; can use this for anything
	defend
        march
	ai_priority			0.01
        supported_factions			 scythia




		;; the support cavalry (ready to charge where is needed)
		begin_block 0
                        min_units			2
                        max_units			4
                        not_general
                       unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                ;unit_formation          square
                        min_unit_width			45
                        max_unit_width			45
			block_formation		line
			block_relative_pos	0 0.0 -20.0 
			inter_unit_spacing	20.0
			priority			1.0
		end_block

                  begin_dummy_block 1											
		spacer 50.0 50.0 50 50
	end_dummy_block


                ;; The center will consist infantry in mixed formations
		begin_block 2
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_formation          shield_wall
                        min_unit_width			45
                        max_unit_width			45
			block_formation		line
			block_relative_pos	1 0.0 -6.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block


	        ;; general at the center
		begin_block 3
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          shield_wall
			;unit_density			close
			block_formation			line
			block_relative_pos		2 0.0 -17.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_block 4
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			25
			block_formation				line
			block_relative_pos			3 5.0 0.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block

               begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

               ;; The center will consist infantry in mixed formations (2)
		begin_block 6
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_type			any			0.01
                        unit_formation          shield_wall
                        min_unit_width			45
                        max_unit_width			45
			block_formation		line
			block_relative_pos	5 0.0 -3.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Cavalry ambush left
		begin_block 7
                        not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			80
			block_formation		line
			block_relative_pos	1 -25.0 0.0 
			inter_unit_spacing	20.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 8
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			80
			block_formation		line
			block_relative_pos	7 0.0 -3.0 
			inter_unit_spacing	20.0
			priority			0.5
		end_block

                 ;; Cavalry ambush right
		begin_block 9
                      not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			80
			block_formation		line
			block_relative_pos	1 25.0 0.0 
			inter_unit_spacing	20.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 10
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			80
			block_formation		line
			block_relative_pos	9 0.0 -3.0 
			inter_unit_spacing	20.0
			priority			0.5
		end_block


end_formation

begin_formation ai_nomadic_line

	;;; purpose flags													; can use this for anything
	pursue
        march
	ai_priority			0.18
        supported_factions			 scythia




		;; the support cavalry (ready to charge where is needed)
		begin_block 0
                        min_units			2
                        max_units			4
                        not_general
                       unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                ;unit_formation          square
                        min_unit_width			80
                        max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -30.0 
			inter_unit_spacing	30.0
			priority			1.0
		end_block

                  begin_dummy_block 1											
		spacer 50.0 50.0 50 50
	end_dummy_block


                ;; The center will consist infantry in mixed formations
		begin_block 2
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_formation          shield_wall
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -6.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block


	        ;; general at the center
		begin_block 3
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        unit_formation          shield_wall
			;unit_density			close
			block_formation			line
			block_relative_pos		2 0.0 -17.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_block 4
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			25
			block_formation				line
			block_relative_pos			3 5.0 0.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block

               begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

               ;; The center will consist infantry in mixed formations (2)
		begin_block 6
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_type			any			0.01
                        unit_formation          shield_wall
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 0.0 -3.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Cavalry ambush left
		begin_block 7
                        not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			150
                        max_unit_width			150
			block_formation		line
			block_relative_pos	1 -25.0 0.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 8
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			150
                        max_unit_width			150
			block_formation		line
			block_relative_pos	7 0.0 -3.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                 ;; Cavalry ambush right
		begin_block 9
                      not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			150
                        max_unit_width			150
			block_formation		line
			block_relative_pos	1 25.0 0.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 10
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			150
                        max_unit_width			150
			block_formation		line
			block_relative_pos	9 0.0 -3.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block


end_formation




;****************************************************************************************************************************
; Asian battle formation. Skirmishing will be a priority and also missile cavalry will cover flanks
;****************************************************************************************************************************


begin_formation ai_asian_line

	;;; purpose flags												; can use this for anything
        march
	ai_priority			0.05
        supported_factions			 pontus, armenia 



                ;; If there are elephants, skirmishers will follow them to support them.
		begin_block 0
                        not_general
			unit_type			skirmish infantry		1.0
                        unit_type			light infantry		0.8
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        ;default_melee_state	fire_at_will
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -20.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

;; right missile units
		begin_block 1
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	0 2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 2
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	0 -2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                begin_dummy_block 3
			spans 0 1 2 
		end_dummy_block

		;; The main troop line. Spearmen will form a mass.
		begin_block 4
                        not_general
			unit_type			spearmen infantry	2.0
			unit_type			light infantry		0.1
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	3 0.0 -6.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 5
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	4 1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 6
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	4 -1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 7
			spans 0 1 2 3 4 5 6 
		end_dummy_block

                begin_block 8 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
			;unit_density		close
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	7 0 -10.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; general at the back
		begin_block 9
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        unit_formation          shield_wall
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		8 0.0 -6.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block	


                begin_block 10 ;missile cavalry will cover the right
                        not_general
			unit_type			missile cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	7 7 -3.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                 begin_block 11 ;missile cavalry will cover the left
                        not_general
			unit_type			missile cavalry					1.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation		line
			block_relative_pos	7 -7 -3.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

		begin_block 13
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			15
			block_formation				line
			block_relative_pos			12 0.0 -2.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block
              
end_formation


begin_formation ai_asian_line

	;;; purpose flags												; can use this for anything
	defend
	ai_priority			0.1
        supported_factions			 pontus, armenia 



                ;; If there are elephants, skirmishers will follow them to support them.
		begin_block 0
                        not_general
			unit_type			skirmish infantry		1.0
                        unit_type			light infantry		0.8
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        ;default_melee_state	fire_at_will
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 0.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

;; right missile units
		begin_block 1
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			40
                        max_unit_width			50
			block_formation		line
			block_relative_pos	0 2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 2
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			40
                        max_unit_width			50
			block_formation		line
			block_relative_pos	0 -2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                begin_dummy_block 3
			spans 0 1 2 
		end_dummy_block

		;; The main troop line. Spearmen will form a mass.
		begin_block 4
                        not_general
			unit_type			spearmen infantry	2.0
			unit_type			light infantry		0.1
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	3 0.0 -6.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 5
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 6
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 -1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 7
			spans 0 1 2 3 4 5 6 
		end_dummy_block

                begin_block 8 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
			;unit_density		close
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	7 0 -10.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; general at the back
		begin_block 9
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          shield_wall
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		8 0.0 -6.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block	


                begin_block 10 ;missile cavalry will cover the right
                        not_general
			unit_type			missile cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 7 -3.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                 begin_block 11 ;missile cavalry will cover the left
                        not_general
			unit_type			missile cavalry					1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 -7 -3.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

		begin_block 13
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			30
			block_formation				line
			block_relative_pos			12 0.0 -2.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block
              
end_formation



;the formation attacks and sends skirmishers to challenge the enemy. The missile cavalry will challenge the enemy also.
begin_formation ai_asian_line

	;;; purpose flags													; can use this for anything
	attack
	ai_priority			0.15
        supported_factions			 pontus, armenia

		

		;; If there are elephants, skirmishers will follow them to support them.
		begin_block 0
                        not_general
			unit_type			skirmish infantry		1.0
                        unit_type			light infantry		0.8
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        ;default_melee_state	fire_at_will
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -20.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

;; right missile units
		begin_block 1
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			40
                        max_unit_width			50
			block_formation		line
			block_relative_pos	0 2.0 25.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 2
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			40
                        max_unit_width			50
			block_formation		line
			block_relative_pos	0 -2.0 25.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                begin_dummy_block 3
			spans 0 1 2 
		end_dummy_block

		;; The main troop line. Spearmen will form a mass.
		begin_block 4
                        not_general
			unit_type			spearmen infantry	2.0
			unit_type			light infantry		0.1
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	3 0.0 -6.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 5
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 6
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
                        block_formation		line
			block_relative_pos	4 -1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 7
			spans 0 1 2 3 4 5 6 
		end_dummy_block

                begin_block 8 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
			;unit_density		close
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	7 0 -30.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; general at the back
		begin_block 9
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          shield_wall
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		8 0.0 -30.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block	


                begin_block 10 ;missile cavalry will cover the right
                        not_general
			unit_type			missile cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 20 25.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                 begin_block 11 ;missile cavalry will cover the left
                        not_general
			unit_type			missile cavalry					1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 -20 25.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

		begin_block 13
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation				line
			block_relative_pos			12 0.0 -2.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block
              
end_formation



;the multirole swap of the formation will make missile cavalry to cover both flanks than attack.Missiles swap behind
begin_formation ai_asian_line

	;;; purpose flags
        attack													; can use this for anything
	defend
        march
	ai_priority			0.4
        supported_factions			 pontus, armenia




		;; If there are elephants, skirmishers will follow them to support them. The formation will stretch.
		begin_block 0
                        not_general
			unit_type			skirmish infantry		1.0
                        unit_type			light infantry		0.8
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        ;default_melee_state	fire_at_will
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -10.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

;; right missile units
		begin_block 1
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	0 2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 2
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	0 -2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                begin_dummy_block 3
			spans 0 1 2 
		end_dummy_block

		;; The main troop line. Spearmen will form a mass.
		begin_block 4
                        not_general
			unit_type			spearmen infantry	2.0
			unit_type			light infantry		0.1
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	3 0.0 10.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 5
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 6
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 -1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 7
			spans 0 1 2 3 4 5 6 
		end_dummy_block

                begin_block 8 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
			;unit_density		close
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	7 0 -10.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; general at the back
		begin_block 9
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          shield_wall
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		8 0.0 -16.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block	


                begin_block 10 ;missile cavalry will cover the right of general
                        not_general
			unit_type			missile cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	9 17 -3.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                 begin_block 11 ;missile cavalry will cover the left of general
                        not_general
			unit_type			missile cavalry					1.0
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	9 -17 -3.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

		begin_block 13
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation				line
			block_relative_pos			12 0.0 -2.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block
              
end_formation


;the multirole swap of the formation will make missile cavalry to cover both flanks than attack.Missiles swap behind
begin_formation ai_asian_line

	;;; purpose flags												; can use this for anything
	pursue
	ai_priority			0.3
        supported_factions			 pontus, armenia




		;; If there are elephants, skirmishers will follow them to support them. The formation will stretch.
		begin_block 0
                        not_general
			unit_type			skirmish infantry		1.0
                        unit_type			light infantry		0.8
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        ;default_melee_state	fire_at_will
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -20.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

;; right missile units
		begin_block 1
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			40
                        max_unit_width			40
			block_formation		line
			block_relative_pos	0 2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

;; left missile units
                begin_block 2
                        not_general
			unit_type			missile infantry		1.0
                        ;default_melee_state	fire_at_will
                        ;unit_formation          square
                        min_unit_width			40
                        max_unit_width			40
			block_formation		line
			block_relative_pos	0 -2.0 -1.0 
			inter_unit_spacing	6.0
			priority			1.0
		end_block

                begin_dummy_block 3
			spans 0 1 2 
		end_dummy_block

		;; The main troop line. Spearmen will form a mass.
		begin_block 4
                        not_general
			unit_type			spearmen infantry	2.0
			unit_type			light infantry		0.1
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          phalanx
			unit_density		close, loose
                        min_unit_width			30
                        max_unit_width			30
			block_formation		line
			block_relative_pos	3 0.0 10.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 5
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 6
                        min_units			1
                        not_general
			unit_type			heavy infantry	1.0
			unit_type			light infantry		0.6
                        unit_type			infantry			0.1
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          shield_wall
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 -1.0 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 7
			spans 0 1 2 3 4 5 6 
		end_dummy_block

                begin_block 8 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
			;unit_density		close
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 0 -10.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

		;; general at the back
		begin_block 9
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          shield_wall
                        ;default_melee_state	defend
			;unit_density			close
			block_formation			line
			block_relative_pos		8 0.0 -26.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block	


                begin_block 10 ;missile cavalry will cover the right of general
                        not_general
			unit_type			missile cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	9 17 -13.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                 begin_block 11 ;missile cavalry will cover the left of general
                        not_general
			unit_type			missile cavalry					1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	9 -17 -13.0 
			inter_unit_spacing	0.2
			priority			0.6
		end_block


	        ;; put the artillery and handlers behind everyone
		begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

		begin_block 13
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                        ;default_melee_state	skirmish
                        min_unit_width			20
                        max_unit_width			25
			block_formation				line
			block_relative_pos			12 0.0 -12.0
			inter_unit_spacing			10.0
			priority					1.0
		end_block

              
end_formation



;***********************************************************************************************
; Skirmishing battle formation. Formation for missile strong armies. Missile Cavalry are in front.The skirmishers/missile units
; form a shield in front of vanguard. 
;***********************************************************************************************


begin_formation ai_skirmish_line

	;;; purpose flags													; can use this for anything
        march
	ai_priority			0.1
        supported_factions			 numidia, parthia


		;; Missile cavalry or Elephants in front
		begin_block 0
                        not_general
			unit_type			missile cavalry		1.0
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square, phalanx
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -20.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

;; Foot Skirmishers follow
		begin_block 1
                        not_general
			unit_type			skirmish infantry		1.0
                        ;unit_formation          square
                         min_unit_width			15
                        max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -10.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; The main Infantry line
                begin_block 2
                        min_units			2
                        not_general
			unit_type			infantry		1.0
                        ;unit_formation          schiltrom
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	1 0.0 -15.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 3
                        max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          schiltrom
                        min_unit_width			15
                        max_unit_width			20
			block_formation		column
			block_relative_pos	2 0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 4
                       max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          schiltrom
                        min_unit_width			15
                        max_unit_width			20
			block_formation		column
			block_relative_pos	2 -0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

		;; general at the back
		begin_block 6
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		5 0.0 -10.0
			inter_unit_spacing		40.0
			priority				1.0
		end_block	


                begin_block 7 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	6 2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 8 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation		line
			block_relative_pos	6 -2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers and long range missiles behind everyone
		begin_dummy_block 9
			spans 0 1 2 3 4 5 6 7 8
		end_dummy_block

		begin_block 10
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type					ranged_missile_infantry				2.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			20
			block_formation				line
			block_relative_pos			9 0.0 -8.0
			inter_unit_spacing			6.0
			priority					1.0
		end_block
              
end_formation


begin_formation ai_skirmish_line

	;;; purpose flags													; can use this for anything
	defend
        march
	ai_priority			0.25
        supported_factions			 numidia, parthia


		;; Missile cavalry or Elephants in front
		begin_block 0
                        not_general
			unit_type			missile cavalry		1.0
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square, phalanx
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -10.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

;; Foot Skirmishers follow
		begin_block 1
                        not_general
			unit_type			skirmish infantry		1.0
                        ;unit_formation          square
                         min_unit_width			15
                        max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -10.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; The main Infantry line
                begin_block 2
                        min_units			2
                        not_general
			unit_type			infantry		1.0
                        ;unit_formation          schiltrom
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -15.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 3
                        max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          schiltrom
                        min_unit_width			20
                        max_unit_width			25
			block_formation		column
			block_relative_pos	2 0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 4
                       max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;default_melee_state	skirmish
                        ;unit_formation          schiltrom
                        min_unit_width			20
                        max_unit_width			25
			block_formation		column
			block_relative_pos	2 -0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

		;; general at the back
		begin_block 6
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		5 0.0 -10.0
			inter_unit_spacing		40.0
			priority				1.0
		end_block	


                begin_block 7 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 8 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 -2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers and long range missiles behind everyone
		begin_dummy_block 9
			spans 0 1 2 3 4 5 6 7 8
		end_dummy_block

		begin_block 10
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type					ranged_missile_infantry				2.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation				line
			block_relative_pos			9 0.0 -8.0
			inter_unit_spacing			6.0
			priority					1.0
		end_block
              
end_formation

;the formation attacks and the missile cavalry goes ahead to pepper the enemy. The archers will cover the infantry and support cavalry will predate
begin_formation ai_skirmish_line

	;;; purpose flags													; can use this for anything
	attack
        march
	ai_priority			0.25
        supported_factions			 numidia, parthia

		

		;; Missile cavalry or Elephants in front
		begin_block 0
                        not_general
			unit_type			missile cavalry		1.0
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square, phalanx
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -20.0 
			inter_unit_spacing	20.0
			priority			1.0
		end_block

;; Foot Skirmishers follow
		begin_block 1
                        not_general
			unit_type			skirmish infantry		1.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -10.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; The main Infantry line
                begin_block 2
                        min_units			2
                        not_general
			unit_type			infantry		1.0
                        ;unit_formation          schiltrom
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -55.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 3
                        max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;unit_formation          schiltrom
                        min_unit_width			20
                        max_unit_width			25
                        ;default_melee_state	skirmish
			block_formation		column
			block_relative_pos	2 0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 4
                       max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
                        min_unit_width			20
                        max_unit_width			25
			block_formation		column
			block_relative_pos	2 -0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

		;; general at the back
		begin_block 6
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		5 0.0 -20.0
			inter_unit_spacing		40.0
			priority				1.0
		end_block	


                begin_block 7 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 22 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 8 ;cavalry will protect the general at all costs.
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 -22 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers and long range missiles behind everyone
		begin_dummy_block 9
			spans 0 1 2 3 4 5 6 7 8
		end_dummy_block

		begin_block 10
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type					ranged_missile_infantry				2.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation				line
			block_relative_pos			5 0.0 -30.0
			inter_unit_spacing			6.0
			priority					1.0
		end_block
              
end_formation

;ther multirole swap of the formation will make cavalry to pick flanks and attack!
begin_formation ai_skirmish_line

	;;; purpose flags
        attack													; can use this for anything
	defend
	ai_priority			0.1
        supported_factions			 numidia, parthia




		;; Missile cavalry or Elephants in front
		begin_block 0
                        not_general
			unit_type			missile cavalry		1.0
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square, phalanx
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 0.0 
			inter_unit_spacing	20.0
			priority			1.0
		end_block

;; Foot Skirmishers follow
		begin_block 1
                        not_general
			unit_type			skirmish infantry		1.0
                        ;unit_formation          square
                        min_unit_width			15
                        max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -10.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; The main Infantry line
                begin_block 2
                        min_units			2
                        not_general
			unit_type			infantry		1.0
                        ;unit_formation          schiltrom
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -15.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 3
                        max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
                        min_unit_width			30
                        max_unit_width			35
			block_formation		column
			block_relative_pos	2 0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 4
                       max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
                        min_unit_width			30
                        max_unit_width			35
			block_formation		column
			block_relative_pos	2 -0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

		;; general at the back
		begin_block 6
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		5 0.0 -15.0
			inter_unit_spacing		40.0
			priority				1.0
		end_block	


                begin_block 7 ;cavalry will attack right flank
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	5 15 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 8 ;cavalry will attack left flank
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	5 -15 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers and long range missiles behind everyone
		begin_dummy_block 9
			spans 0 1 2 3 4 5 6 7 8
		end_dummy_block

		begin_block 10
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type					ranged_missile_infantry				2.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation				line
			block_relative_pos			9 0.0 -8.0
			inter_unit_spacing			6.0
			priority					1.0
		end_block
              
end_formation

begin_formation ai_skirmish_line

	;;; purpose flags												; can use this for anything
	pursue
        march
	ai_priority			0.3
        supported_factions			 numidia, parthia




		;; Missile cavalry or Elephants in front
		begin_block 0
                        not_general
			unit_type			missile cavalry		1.0
			unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square, phalanx
                        ;min_unit_width			15
                        ;max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -20.0 
			inter_unit_spacing	10.0
			priority			1.0
		end_block

;; Foot Skirmishers follow
		begin_block 1
                        not_general
			unit_type			skirmish infantry		1.0
                        ;unit_formation          square
                         min_unit_width			15
                        max_unit_width			80
			block_formation		line
			block_relative_pos	0 0.0 -10.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; The main Infantry line
                begin_block 2
                        min_units			2
                        not_general
			unit_type			infantry		1.0
                        ;unit_formation          schiltrom
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -15.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; the right cover of infantry
		begin_block 3
                        max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
                        min_unit_width			25
                        max_unit_width			30
			block_formation		column
			block_relative_pos	2 0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; the left cover of infantry
		begin_block 4
                       max_units			3
                        not_general
			unit_type			light infantry		1.0
                        unit_type			infantry			0.5
			unit_type			any					0.1
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
                        min_unit_width			25
                        max_unit_width			30
			block_formation		column
			block_relative_pos	2 -0.2 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

		;; general at the back
		begin_block 6
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          schiltrom
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		5 0.0 -25.0
			inter_unit_spacing		40.0
			priority				1.0
		end_block	


                begin_block 7 ;cavalry will attack right flank
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	5 15 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                 begin_block 8 ;cavalry will attack left flank
                        not_general
			unit_type			cavalry				1.0
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	5 -15 0.0 
			inter_unit_spacing	0.2
			priority			0.8
		end_block


	        ;; put the artillery and handlers and long range missiles behind everyone
		begin_dummy_block 9
			spans 0 1 2 3 4 5 6 7 8
		end_dummy_block

		begin_block 10
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type					ranged_missile_infantry				2.0
                        ;default_melee_state	skirmish
                        unit_formation          square
                        min_unit_width			20
                        max_unit_width			25
			block_formation				line
			block_relative_pos			9 0.0 -8.0
			inter_unit_spacing			6.0
			priority					1.0
		end_block
              
end_formation






;**********************************************************************************************************************************************
; Semi-barbarian formation.It has no great weaknesses and provides good infantry cover 
;**********************************************************************************************************************************************

;Great infantry all around cover. Cavalry on the flanks
begin_formation ai_barbarian_line

	;;; purpose flags													
        march
	ai_priority			0.01
        supported_factions			 slave, thrace, spain  


		;; First line of infantry
		begin_block 0
			min_units			3
                        not_general
			unit_type			light infantry 1.0
                        unit_type			heavy infantry 0.5
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	0 0.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 1
			min_units			3
                        not_general

                        unit_type			heavy infantry 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	0 0.0 -2.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; 3rd line of infantry
		begin_block 2
			min_units			2
                        not_general
			unit_type			heavy infantry 0.4
			unit_type			spearmen 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	1 0.0 -2.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; Archers behind
		begin_block 3
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			non_phalanx_spear 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	2 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 4
			spans  0 1 2 3
		end_dummy_block

                ; Screen of missile inf
		begin_block 5
                        not_general
			unit_type			missile infantry 0.5
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type			any					0.01
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        ;min_unit_width			20
                        ;max_unit_width			20
			block_formation		line
			block_relative_pos	4 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; artillery and handlers at the back
		begin_block 6
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 7
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 -1.0 -5.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	7 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	4 1.0 -5.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	9 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                begin_dummy_block 11
			spans 0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

              

;; general at the back
		begin_block 12
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		11 0.0 -10.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 13
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12
		end_dummy_block

              
		begin_block 14
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	13 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation


;Great infantry all around cover. Cavalry on the flanks
begin_formation ai_barbarian_line

	;;; purpose flags													
	defend
	ai_priority			0.29
        supported_factions			 slave, thrace, spain  


		;; First line of infantry
		begin_block 0
			min_units			3
                        not_general
			unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.3
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 1
			min_units			3
                        not_general

                        unit_type			light infantry 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	0 0.0 -2.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; 3rd line of infantry
		begin_block 2
			min_units			2
                        not_general
			unit_type			heavy infantry 0.4
			unit_type			spearmen 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -2.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; Archers behind
		begin_block 3
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			non_phalanx_spear 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	2 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 4
			spans  0 1 2 3
		end_dummy_block

                ; Screen of missile inf
		begin_block 5
                        not_general
			unit_type			missile infantry 0.5
                        unit_type			elephants 3.0
                        unit_type			heavy_chariots 3.0
                        unit_type			any					0.01
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        ;min_unit_width			25
                        ;max_unit_width			25
			block_formation		line
			block_relative_pos	4 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; artillery and handlers at the back
		begin_block 6
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 7
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 -1.0 -5.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	4 1.0 -5.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	9 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                begin_dummy_block 11
			spans 0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

              

;; general at the back
		begin_block 12
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		11 0.0 -10.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 13
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12
		end_dummy_block

              
		begin_block 14
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	13 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation

;the formation attacks and maneuvres the cavalry
begin_formation ai_barbarian_line

	;;; purpose flags													; can use this for anything
	attack
	ai_priority			0.5
        supported_factions			 slave, thrace, spain

		

		;; First line of infantry
		begin_block 0
			min_units			3
                        not_general
			unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.3
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 1
			min_units			3
                        not_general
                        unit_type			light infantry 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	0 0.0 -2.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; 3rd line of infantry
		begin_block 2
			min_units			2
                        not_general
			unit_type			heavy infantry 0.4
			unit_type			spearmen 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	1 0.0 -2.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; Archers behind
		begin_block 3
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			non_phalanx_spear 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	2 0.0 -2.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 4
			spans  0 1 2 3
		end_dummy_block

                ; Screen of missile inf
		begin_block 5
                        not_general
			unit_type			missile infantry 0.5
                        unit_type			elephants 3.0
                        unit_type			heavy_chariots 3.0
                        unit_type			any					0.01
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        ;min_unit_width			30
                        ;max_unit_width			35
			block_formation		line
			block_relative_pos	4 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; artillery and handlers at the back
		begin_block 6
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	4 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 7
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	4 -35.0 25.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	7 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	4 35.0 25.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			30
                        max_unit_width			35
			block_formation		line
			block_relative_pos	9 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                begin_dummy_block 11
			spans 0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block


;; general at the back
		begin_block 12
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		11 0.0 -35.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 13
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12
		end_dummy_block

              
		begin_block 14
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	13 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation






;the multirole swap of the formation will make cavalry to pull back and archers to go to flanks 
begin_formation ai_barbarian_line
	;;; purpose flags
        attack													; can use this for anything
	defend
	ai_priority			0.15
        supported_factions			 slave, thrace, spain




		;; First line of infantry
		begin_block 0
			min_units			3
                        not_general
			unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.3
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 1
			min_units			3
                        not_general
                        unit_type			heavy infantry 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	0 0.0 -2.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; 3rd line of infantry
		begin_block 2
			min_units			2
                        not_general
			unit_type			heavy infantry 0.4
			unit_type			spearmen 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	1 0.0 -2.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; Archers behind
		begin_block 3
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			non_phalanx_spear 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	2 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 4
			spans  0 1 2 3
		end_dummy_block

                ; Screen of missile inf
		begin_block 5
                        not_general
			unit_type			missile infantry 0.5
                        unit_type			elephants 3.0
                        unit_type			heavy_chariots 3.0
                        unit_type			any					0.01
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			;unit_density		close
                        ;min_unit_width			25
                        ;max_unit_width			30
			block_formation		line
			block_relative_pos	4 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; artillery and handlers at the back
		begin_block 6
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	4 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 7
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	6 -15.0 -15.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	7 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	6 15.0 -15.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	9 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                begin_dummy_block 11
			spans 0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

                 ;; left flank missile(decides to support the flank more)
		begin_block 12
                        min_units			1
                        max_units			2
                        not_general
                        unit_type			missile infantry 0.5
                        unit_type			missile cavalry 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	11 -5.0 0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right flank missile(decides to support the flank more)
		begin_block 13
                        min_units			1
                        max_units			2
                        not_general
                        unit_type			missile infantry 0.5
                        unit_type			missile cavalry 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	11 5.0 0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

;; general at the back
		begin_block 14
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		11 0.0 -20.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 15
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12 13 14
		end_dummy_block

              
		begin_block 16
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	15 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation

begin_formation ai_barbarian_line
	;;; purpose flags												; can use this for anything
	pursue
	ai_priority			0.05
        supported_factions			 slave, thrace, spain




		;; First line of infantry
		begin_block 0
			min_units			3
                        not_general
			unit_type			light infantry 1.0
                        unit_type			heavy infantry 0.5
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; second line of infantry
		begin_block 1
			min_units			3
                        not_general
                        unit_type			heavy infantry 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	0 0.0 -2.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; 3rd line of infantry
		begin_block 2
			min_units			2
                        not_general
			unit_type			heavy infantry 0.4
			unit_type			spearmen 1.0
                        ;default_melee_state	defend
                        ;unit_formation          square
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	1 0.0 -2.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; Archers behind
		begin_block 3
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			non_phalanx_spear 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	2 0.0 -26.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 4
			spans  0 1 2 3
		end_dummy_block

                ; Screen of missile inf
		begin_block 5
                        not_general
			unit_type			missile infantry 0.5
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type			any					0.01
                        ;default_melee_state	skirmish
                        ;unit_formation          square
			;unit_density		close
                        ;min_unit_width			28
                        ;max_unit_width			35
			block_formation		line
			block_relative_pos	4 0.0 -16.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

;; artillery and handlers at the back
		begin_block 6
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	4 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 7
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	6 -15.0 -15.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	7 1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	6 15.0 -15.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	9 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.5
		end_block

                begin_dummy_block 11
			spans 0 1 2 3 4 5 6 7 8 9 10 
		end_dummy_block

                 ;; left flank missile(decides to support the flank more)
		begin_block 12
                        min_units			1
                        max_units			2
                        not_general
                        unit_type			missile infantry 0.5
                        unit_type			missile cavalry 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	11 -5.0 0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; right flank missile(decides to support the flank more)
		begin_block 13
                        min_units			1
                        max_units			2
                        not_general
                        unit_type			missile infantry 0.5
                        unit_type			missile cavalry 0.5
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			28
                        max_unit_width			35
			block_formation		line
			block_relative_pos	11 5.0 0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

;; general at the back
		begin_block 14
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		11 0.0 -20.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 15
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12 13 14
		end_dummy_block

              
		begin_block 16
                        ;not_general
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	15 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation





;**********************************************************************************************************************************************
; Barbaric Onslaught. Powerful center. En mass deployment of infantry for maximum effect of charge.
;**********************************************************************************************************************************************

;Powerful center attack. 
begin_formation ai_barbarian_line_2

	;;; purpose flags													
        march
	ai_priority			0.01
        supported_factions			 gauls, britons, dacia, germans


		;; Center block of infantry
		begin_block 0
			min_units			1
                        max_units			3
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		column
			block_relative_pos	0 0.0 5.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;;Right block of infantry
		begin_block 1
			min_units			1
                        max_units			3
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		column
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; Left block of infantry
		begin_block 2
			min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		column
			block_relative_pos	0 -0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Left of left block of infantry
		begin_block 3
			min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		column
			block_relative_pos	2 -0.2 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; Right of right block of infantry
		begin_block 4
			min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			20
                        max_unit_width			20
			block_formation		column
			block_relative_pos	1 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                begin_dummy_block 5
			spans  0 1 2 3 4 
		end_dummy_block

		;; Archers behind
		begin_block 6
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			missile infantry 1.0
                        ;default_melee_state	skirmish
                        unit_formation          square
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	5 0.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block


;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	6 0.0 -6.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	5 -1.0 -5.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	8 0 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	5 1.0 -5.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 11
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			20
                        max_unit_width			20
			block_formation		line
			block_relative_pos	10 0 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

              

;; general at the back
		begin_block 13
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
                        min_unit_width			20
                        max_unit_width			20
			block_formation			line
			block_relative_pos		12 0.0 -10.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 14
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12 13
		end_dummy_block

              
		begin_block 15
                        ;not_general
                        unit_type				chariots			1.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	14 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation

;Powerful center attack. 
begin_formation ai_barbarian_line_2

	;;; purpose flags													
	defend
	ai_priority			0.09
        supported_factions			 gauls, britons, dacia, germans


		;; Center block of infantry
		begin_block 0
			min_units			1
                        max_units			3
                        not_general
                        unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		column
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;;Right block of infantry
		begin_block 1
			min_units			1
                        max_units			3
                        not_general
                        unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		column
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; Left block of infantry
		begin_block 2
			min_units			1
                        max_units			3
                        not_general
			unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		column
			block_relative_pos	0 -0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Left of left block of infantry
		begin_block 3
			min_units			1
                        max_units			3
                        not_general
			unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		column
			block_relative_pos	2 -0.2 0.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; Right of right block of infantry
		begin_block 4
			min_units			1
                        max_units			3
                        not_general
			unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			25
			block_formation		column
			block_relative_pos	1 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 5
			spans  0 1 2 3 4 
		end_dummy_block

		;; Archers behind
		begin_block 6
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			missile infantry 1.0
                        ;default_melee_state	skirmish
                        unit_formation          square
                       min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 0.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block


;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -6.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 -1.0 -5.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	8 0 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                       min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 1.0 -5.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 11
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	10 0 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

              

;; general at the back
		begin_block 13
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
                        min_unit_width			20
                        max_unit_width			20
			block_formation			line
			block_relative_pos		12 0.0 -10.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 14
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12 13
		end_dummy_block

              
		begin_block 15
                        ;not_general
                        unit_type				chariots			1.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	14 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation

;the formation attacks and maneuvres the cavalry to the flanks and on distance ready to charge from afar.
begin_formation ai_barbarian_line_2

	;;; purpose flags													; can use this for anything
	attack
	ai_priority			0.88
        supported_factions			 gauls, britons, dacia, germans

		

		;; Center block of infantry
		begin_block 0
			min_units			1
                        max_units			3
                        not_general
                        unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			35
			block_formation		column
			block_relative_pos	0 0.0 5.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;;Right block of infantry
		begin_block 1
			min_units			1
                        max_units			3
                        not_general
                        unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			35
			block_formation		column
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; Left block of infantry
		begin_block 2
			min_units			1
                        max_units			3
                        not_general
			unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			35
			block_formation		column
			block_relative_pos	0 -0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Left of left block of infantry
		begin_block 3
			min_units			1
                        max_units			3
                        not_general
			unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			35
			block_formation		column
			block_relative_pos	2 -0.2 0.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                ;; Right of right block of infantry
		begin_block 4
			min_units			1
                        max_units			3
                        not_general
			unit_type			spearmen 1.0
                        unit_type			heavy infantry 0.8
                        unit_type			light infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			35
			block_formation		column
			block_relative_pos	1 0.2 0.0
			inter_unit_spacing	0.2
			priority			0.8
		end_block

                begin_dummy_block 5
			spans  0 1 2 3 4 
		end_dummy_block

		;; Archers behind
		begin_block 6
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			missile infantry 1.0
                        ;default_melee_state	skirmish
                        unit_formation          square
                       min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block


;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 0.0 -6.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 -1.0 -35.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	8 -1 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                       min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	6 1.0 -35.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 11
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	10 1 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

              

;; general at the back
		begin_block 13
			min_units				1
			max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
                        min_unit_width			20
                        max_unit_width			20
			block_formation			line
			block_relative_pos		12 0.0 -30.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 14
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12 13
		end_dummy_block

              
		begin_block 15
                        ;not_general
                        unit_type				chariots			1.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	14 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation

;the multirole swap of the formation will make cavalry to pull back and infantry to form a semi-square
begin_formation ai_barbarian_line_2
	;;; purpose flags
        attack													; can use this for anything
	defend
	ai_priority			0.01
        supported_factions			 gauls, britons, dacia, germans



		;; Center block of infantry
		begin_block 0
			min_units			1
                        max_units			3
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			spearmen 0.3
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			25
                        max_unit_width			30
			block_formation		column
			block_relative_pos	0 0.0 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;;Right block of infantry
		begin_block 1
			min_units			1
                        max_units			3
                        not_general
                        unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			spearmen 0.3
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                         min_unit_width			25
                        max_unit_width			30
			block_formation		column
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; Left block of infantry
		begin_block 2
			min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			spearmen 0.3
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                         min_unit_width			25
                        max_unit_width			30
			block_formation		column
			block_relative_pos	0 -0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Left of left block of infantry
		begin_block 3
			min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			spearmen 0.3
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                         min_unit_width			25
                        max_unit_width			30
			block_formation		column
			block_relative_pos	2 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; Right of right block of infantry
		begin_block 4
			min_units			1
                        max_units			3
                        not_general
			unit_type			heavy infantry 1.0
                        unit_type			light infantry 0.5
                        unit_type			spearmen 0.3
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                         min_unit_width			25
                        max_unit_width			30
			block_formation		column
			block_relative_pos	1 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                begin_dummy_block 5
			spans  0 1 2 3 4 
		end_dummy_block

		;; Archers behind
		begin_block 6
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			missile infantry 1.0
                        ;default_melee_state	skirmish
                        unit_formation          square
                         min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	5 0.0 -10.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block


;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                         min_unit_width			25
                        max_unit_width			30
			block_formation		line
			block_relative_pos	6 0.0 -6.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                         min_unit_width			25
                        max_unit_width			35
			block_formation		line
			block_relative_pos	6 -15.0 -5.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                         min_unit_width			25
                        max_unit_width			35
			block_formation		line
			block_relative_pos	8 -1 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                         min_unit_width			25
                        max_unit_width			35
			block_formation		line
			block_relative_pos	6 15.0 -5.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 11
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                         min_unit_width			25
                        max_unit_width			35
			block_formation		line
			block_relative_pos	10 1 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

              

;; general at the back
		begin_block 13
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		12 0.0 -20.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 14
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12 13
		end_dummy_block

              
		begin_block 15
                        ;not_general
                        unit_type				chariots			1.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	14 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation




begin_formation ai_barbarian_line_2
	;;; purpose flags												; can use this for anything
	pursue
	ai_priority			0.01
        supported_factions			 gauls, britons, dacia, germans



		;; Center block of infantry
		begin_block 0
			min_units			1
                        max_units			3
                        not_general
                        unit_type			light infantry 1.0
                        unit_type			heavy infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			35
                        max_unit_width			38
			block_formation		column
			block_relative_pos	0 0.0 -15.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;;Right block of infantry
		begin_block 1
			min_units			1
                        max_units			3
                        not_general
                        unit_type			light infantry 1.0
                        unit_type			heavy infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			35
                        max_unit_width			38
			block_formation		column
			block_relative_pos	0 0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

		;; Left block of infantry
		begin_block 2
			min_units			1
                        max_units			3
                        not_general
			unit_type			light infantry 1.0
                        unit_type			heavy infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			35
                        max_unit_width			38
			block_formation		column
			block_relative_pos	0 -0.2 0.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Left of left block of infantry
		begin_block 3
			min_units			1
                        max_units			3
                        not_general
			unit_type			light infantry 1.0
                        unit_type			heavy infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			35
                        max_unit_width			38
			block_formation		column
			block_relative_pos	2 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                ;; Right of right block of infantry
		begin_block 4
			min_units			1
                        max_units			3
                        not_general
			unit_type			light infantry 1.0
                        unit_type			heavy infantry 0.5
                        unit_type			any 0.001
                        ;default_melee_state	defend
                        ;unit_formation          square
			unit_density		close, loose
                        min_unit_width			35
                        max_unit_width			38
			block_formation		column
			block_relative_pos	1 0.0 -0.2
			inter_unit_spacing	0.2
			priority			0.6
		end_block

                begin_dummy_block 5
			spans  0 1 2 3 4 
		end_dummy_block

		;; Archers behind
		begin_block 6
                        not_general
			unit_type			ranged_missile_infantry 1.0
                        unit_type			missile infantry 1.0
                        ;default_melee_state	skirmish
                        unit_formation          square
                        min_unit_width			35
                        max_unit_width			38
			block_formation		line
			block_relative_pos	5 0.0 -20.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block


;; artillery and handlers at the back
		begin_block 7
                        not_general
			unit_type			handler				1.0
			unit_type			siege				1.0
                        ;default_melee_state	skirmish
                        ;unit_formation          square
                        min_unit_width			35
                        max_unit_width			38
			block_formation		line
			block_relative_pos	6 0.0 -6.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		;; left flank cav
		begin_block 8
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			35
                        max_unit_width			38
			block_formation		line
			block_relative_pos	6 -15.0 -5.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; left flank cav(more)
		begin_block 9
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			35
                        max_unit_width			38
			block_formation		line
			block_relative_pos	8 0 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

		;; right_flank cav
		begin_block 10
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			35
                        max_unit_width			38
			block_formation		line
			block_relative_pos	6 15.0 -5.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                ;; right_flank cav(more)
		begin_block 11
                        not_general
			unit_type			cavalry 1.0
			unit_type				chariots			1.0
                        min_unit_width			35
                        max_unit_width			38
			block_formation		line
			block_relative_pos	10 0 -3.0
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                begin_dummy_block 12
			spans 0 1 2 3 4 5 6 7 8 9 10 11 
		end_dummy_block

              

;; general at the back
		begin_block 13
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          square, wedge
                        ;default_melee_state	skirmish
			;unit_density			close
			block_formation			line
			block_relative_pos		12 0.0 -20.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_dummy_block 14
			spans  0 1 2 3 4 5 6 7 8 9 10 11 12 13
		end_dummy_block

              
		begin_block 15
                        ;not_general
                        unit_type				chariots			1.0
                        unit_type				elephants			3.0
                        unit_type				general_unit			1.5
                        ;unit_formation          wedge
                        ;default_melee_state	skirmish
                        ;min_unit_width			80
                        ;max_unit_width			160
			block_formation		line
			block_relative_pos	14 0.0 -5.0
			inter_unit_spacing	5.0
			priority			1.0
		end_block


end_formation

;***********************************************
;****Bridge Assault/Super Darth AI variation****
;***********************************************

;for all kinds of armies
begin_formation ai_Darth_super_assault

	;;; purpose flags												; can use this for anything
        crossing_assault_force
	ai_priority			0.33



               begin_dummy_block 0											;; centre slot left empty for assault column to pass through
		spacer -50.0 0.0 550 20
	       end_dummy_block

		begin_dummy_block 1											
		spacer 0.0 250.0 50 50
	end_dummy_block


		;; 1st line of infantry
		begin_block 2
			min_units			3
			unit_type			heavy_pilum_infantry 1.0
			unit_type			light_pilum_infantry 0.1
                        unit_type			heavy infantry 0.0
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			;unit_density		loose, close
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -6.0
			inter_unit_spacing	25.0
			priority			1.0
		end_block

		;; 2nd line of infantry
		begin_block 3
			max_units			4
                        unit_type			spearmen 1.0
                        unit_type			light infantry 0.6
			unit_type			heavy infantry 0.6
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
                        ;unit_density		loose, close
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	2 0.0 -6.0
			inter_unit_spacing	25.0
			priority			1.0
		end_block

		;; Archers behind
		begin_block 4
			unit_type			ranged_missile_infantry 1.0
                        unit_type			light infantry 0.4
			unit_type			heavy infantry 0.4
			unit_type			spearmen 0.8
                        unit_type			any 0.0
                        unit_formation          square, testudo, phalanx
                        ;unit_formation          square, testudo
                        ;unit_density		loose, close
                        min_unit_width			25
                        max_unit_width			45
			block_formation		line
			block_relative_pos	3 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 5
			spans  0 1 2 3 4 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 6
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.01
                        unit_formation          square, phalanx
                        ;unit_density		close, loose
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		begin_dummy_block 7											
		spacer 5.0 -250.0 100 150
	end_dummy_block


                ;; left flank cav
		begin_block 8
			unit_type			cavalry 1.0
                        ;default_melee_state	defend
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.9
		end_block

		;; right_flank cav
		begin_block 9
			unit_type			cavalry 1.0
                        ;default_melee_state	defend
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 1.0 -3.0
			inter_unit_spacing	0.2
			priority			0.9
		end_block

                
                 
;; general at the back
		begin_block 10
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;default_melee_state	defend
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		7 0.0 -20.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation

;;;for armies that have static infantry
begin_formation ai_Darth_super_assault

	;;; purpose flags												; can use this for anything
        crossing_assault_force
	ai_priority			0.31



               begin_dummy_block 0											;; centre slot left empty for assault column to pass through
		spacer -50.0 0.0 550 20
	       end_dummy_block

		begin_dummy_block 1											
		spacer 0.0 250.0 50 50
	end_dummy_block


		;; 1st line of infantry
		begin_block 2
			min_units			3
			unit_type			non_phalanx_spearmen 1.0
                        unit_type			heavy infantry 0.0
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
			;unit_density		loose, close
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -6.0
			inter_unit_spacing	25.0
			priority			1.0
		end_block

		;; 2nd line of infantry
		begin_block 3
			max_units			4
                        unit_type			phalanx 1.0
                        unit_type			infantry 0.6
                        ;default_melee_state	defend
                        unit_formation          square, testudo, wedge, phalanx
                        ;unit_formation          square, testudo
                        ;unit_density		loose, close
                        min_unit_width			20
                        max_unit_width			25
			block_formation		line
			block_relative_pos	2 0.0 -6.0
			inter_unit_spacing	25.0
			priority			1.0
		end_block

		;; Archers behind
		begin_block 4
			unit_type			ranged_missile_infantry 1.0
                        unit_type			light infantry 0.4
			unit_type			heavy infantry 0.4
			unit_type			spearmen 0.8
                        unit_type			any 0.0
                        unit_formation          square, testudo, phalanx
                        ;unit_formation          square, testudo
                        ;unit_density		loose, close
                        min_unit_width			25
                        max_unit_width			45
			block_formation		line
			block_relative_pos	3 0.0 -6.0
			inter_unit_spacing	0.2
			priority			1.0
		end_block

	
		begin_dummy_block 5
			spans  0 1 2 3 4 
		end_dummy_block

;; artillery and handlers at the back
		begin_block 6
			unit_type			handler				1.0
			unit_type			siege				1.0
			unit_type			any					0.01
                        unit_formation          square, phalanx
                        ;unit_density		close, loose
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 0.0 -20.0
			inter_unit_spacing	10.0
			priority			0.5
		end_block


		;; cavalry on the flanks and back a bit

		begin_dummy_block 7											
		spacer 5.0 -250.0 100 150
	end_dummy_block


                ;; left flank cav
		begin_block 8
			unit_type			cavalry 1.0
                        ;default_melee_state	defend
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 -1 -3.0
			inter_unit_spacing	0.2
			priority			0.9
		end_block

		;; right_flank cav
		begin_block 9
			unit_type			cavalry 1.0
                        ;default_melee_state	defend
                        unit_formation          phalanx, testudo
                        max_unit_width			25
			block_formation		line
			block_relative_pos	7 1.0 -3.0
			inter_unit_spacing	0.2
			priority			0.9
		end_block

                
                 
;; general at the back
		begin_block 10
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;default_melee_state	defend
                        ;unit_formation          square, testudo
			;unit_density			close
			block_formation			line
			block_relative_pos		7 0.0 -20.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block


end_formation


;;;;;for armies that have lots of cavalry
begin_formation ai_Darth_super_assault

	;;; purpose flags													; can use this for anything
        crossing_assault_force
	ai_priority			0.38




		;; the support cavalry (ready to charge where is needed)
		begin_dummy_block 0											;; centre slot left empty for assault column to pass through
		spacer -50.0 0.0 550 20
	       end_dummy_block

                  begin_dummy_block 1											
		spacer 50.0 50.0 50 50
	end_dummy_block


                ;; The center will consist infantry in mixed formations
		begin_block 2
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        ;unit_formation          shield_wall
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	1 0.0 -6.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block


	        ;; general at the center
		begin_block 3
			;min_units				1
			;max_units				1
			unit_type				general_unit			1.0
                        ;unit_formation          shield_wall
			;unit_density			close
			block_formation			line
			block_relative_pos		1 5.0 -17.0
			inter_unit_spacing		10.0
			priority				1.0
		end_block

                begin_block 4
                        not_general
			unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type				chariots			3.0
                        unit_type				elephants			3.0
                        ;unit_formation          square
                        min_unit_width			25
                        max_unit_width			25
			block_formation				line
			block_relative_pos			3 5.0 0.0
			inter_unit_spacing			3.0
			priority					1.0
		end_block

               begin_dummy_block 5
			spans 2 3 4 
		end_dummy_block

               ;; The center will consist infantry in mixed formations (2)
		begin_block 6
                        not_general
			unit_type			spearmen infantry		0.8
			unit_type			heavy infantry		1.0
                        unit_type			infantry			0.6
                        unit_type			any			0.01
                        ;unit_formation          shield_wall
                        min_unit_width			25
                        max_unit_width			25
			block_formation		line
			block_relative_pos	5 0.0 -3.0 
			inter_unit_spacing	0.2
			priority			1.0
		end_block

                ;; Cavalry ambush left
		begin_block 7
                        not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			150
                        max_unit_width			150
			block_formation		line
			block_relative_pos	1 -25.0 0.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 8
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			150
                        max_unit_width			150
			block_formation		line
			block_relative_pos	7 0.0 -3.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

                 ;; Cavalry ambush right
		begin_block 9
                      not_general
		        unit_type				skirmish cavalry		1.0
		unit_type				missile cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			150
                        max_unit_width			150
			block_formation		line
			block_relative_pos	1 25.0 0.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block

;; support cavalry behind
                begin_block 10
                        not_general
		unit_type				heavy cavalry			1.0
		unit_type				spearmen cavalry		1.0
                unit_type			cavalry				0.1
                ;unit_formation          square
                        min_unit_width			150
                        max_unit_width			150
			block_formation		line
			block_relative_pos	1 0.0 -3.0 
			inter_unit_spacing	6.0
			priority			0.5
		end_block


end_formation

;****************************************************************
; Bridge assault cover force***Darth Supplementary
;****************************************************************

begin_formation ai_crossing_assault_cover

	crossing_assault_cover
	ai_priority					0.6								;; priority low, so we only choose if the flag is set

	begin_dummy_block 0											;; centre slot left empty for assault column to pass through
		spacer 0.0 0.0 35 20
	end_dummy_block

	begin_block 1												;; left front shooting position
		unit_type				missile infantry	1
		unit_type				missile cavalry		0.9
		unit_type				infantry					0.6
		;unit_density			close
		block_formation			line
		block_relative_pos		0 -1.0 -15.0
		inter_unit_spacing		2.0
		priority				1.0
	end_block

	begin_block 2												;; right front shooting position
		unit_type				missile infantry	1
		unit_type				missile cavalry		0.9
		unit_type				infantry					0.6
		;unit_density			close
		block_formation			line
		block_relative_pos		0 1.0 -15.0
		inter_unit_spacing		2.0
		priority				1.0
	end_block

	begin_block 3												;; left rear shooting position
		max_units				2
		unit_type				missile infantry	1
		unit_type				missile cavalry		0.9
		unit_type				infantry					0.6
		;unit_density			close
		block_formation			line
		block_relative_pos		1 0.0 -3.0
		inter_unit_spacing		2.0
		priority				0.8
	end_block

	begin_block 4												;; right rear shooting position
		max_units				2
		unit_type				missile infantry	1
		unit_type				missile cavalry		0.9
		unit_type				infantry					0.6
		;unit_density			close
		block_formation			line
		block_relative_pos		2 0.0 -3.0
		inter_unit_spacing		2.0
		priority				0.8
	end_block

	begin_block 5
		unit_type				siege				1			;; left artillery shooting position
                unit_type				missile cavalry		0.9
		unit_type				infantry					0.6
		;unit_density			close
		block_formation			line
		block_relative_pos		3 0.0 -20.0
		inter_unit_spacing		10.0
		priority				0.7
	end_block

	begin_block 6
		unit_type				siege				1			;; right artillery shooting position
                unit_type				missile cavalry		0.9
		unit_type				infantry					0.6
		;unit_density			close
		block_formation			line
		block_relative_pos		4 0.0 -20.0
		inter_unit_spacing		10.0
		priority				0.7
	end_block

        
	begin_dummy_block 7
		spans 0 1 2 3 4 5 6
	end_dummy_block

	begin_block 8
		
		unit_type				cavalry			1.0
                unit_type				general_unit			2.5
		;unit_density			close
		block_formation			column
		block_relative_pos		7 -1.0 0
		inter_unit_spacing		2.0
		priority				0.8
	end_block
	
	begin_block 9
		;;;max_units				2
		unit_type				cavalry			1.0
                unit_type				general_unit			2.5
		;unit_density			close
		block_formation			column
		block_relative_pos		7 1.0 0
		inter_unit_spacing		2.0
		priority				0.8
	end_block

        begin_dummy_block 10
		spans 0 1 2 3 4 5 6 7 8 9
	end_dummy_block

        ;;; main body of units (everything else)
	begin_block 11
		unit_type				any					2.0
		;unit_density			close
		block_formation			line
		block_relative_pos		10 0.0 -5.0
		inter_unit_spacing		2.0
		priority				0.7
	end_block

end_formation


;****************************************************************
; Crossing Block
; For mixed missile and infantry forces
; defending close by a crossing***Darth Supplementary
;****************************************************************

begin_formation ai_crossing_block
	crossing_block
	ai_priority					0.3								;; priority low, so we only choose if the flag is set

	;;; in front of bridge blocking crossing
	begin_block 0
		min_units				1
		max_units				1
		unit_type				heavy infantry			1
		unit_type				light infantry			0.5
		unit_type				skirmish infantry		0.5
		unit_type				any						0.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 0.0 0.0
		inter_unit_spacing		2.0
		priority				1.0
	end_block

	;;; left support of block 0
	begin_block 1
		max_units				1
		unit_type				heavy infantry			1
		unit_type				light infantry			0.8
		unit_type				skirmish infantry		0.8
		unit_type				heavy cavalry			0.1
		unit_type				light cavalry			0.1
		unit_type				skirmish cavalry		0.1
		;unit_density			close
		block_formation			line
		block_relative_pos		0 -8.0 -1.0						;; to the left and slightly behind the back of block 0
		inter_unit_spacing		2.0
		priority				0.9
	end_block

	;;; right support of block 0
	begin_block 2
		max_units				1
		unit_type				heavy infantry			1
		unit_type				light infantry			0.8
		unit_type				skirmish infantry		0.8
		unit_type				heavy cavalry			0.1
		unit_type				light cavalry			0.1
		unit_type				skirmish cavalry		0.1
		;unit_density			close
		block_formation			line
		block_relative_pos		0 8.0 -1.0						;; to the right and slightly behind the back of block 0
		inter_unit_spacing		2.0
		priority				0.9
	end_block

	;;; missile troops behind
	begin_block 3
		unit_type				missile infantry		1.0
		unit_type				missile cavalry			1.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 0.0 -20.0
		inter_unit_spacing		2.0
		priority				0.9
	end_block

	;;; final line for other troops
	begin_block 4
		unit_type				heavy infantry			1.0
		unit_type				light infantry			1.0
		unit_type				skirmish infantry		1.0
		unit_type				heavy cavalry			1.0
		unit_type				light cavalry			1.0
		unit_type				skirmish cavalry		1.0
		unit_type				any						0.1
		;unit_density			close
		block_formation			line
		block_relative_pos		3 0.0 -10.0
		inter_unit_spacing		2.0
		priority				0.1
	end_block

end_formation




;****************************************************************
; Crossing Defend
; For mixed missile and infantry forces
; conducting a standoff defence of a bridge***Darth Supplementary
;****************************************************************


begin_formation ai_crossing_defend
	crossing_defend
	ai_priority					0.4								;; priority low, so we only choose if the flag is set

	;;; missile units in the centre
	begin_block 0
		min_units				1
		max_units				2
		unit_type				missile infantry				1.0
		unit_type				missile cavalry					0.8
		unit_type				heavy infantry					0.7
		unit_type				any								0.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 0.0 0.0
		inter_unit_spacing		2.0
		priority				1
	end_block

	;;; melee troops to left of flank shooters
	begin_block 1
		min_units				0
		max_units				2
		unit_type				heavy infantry					1.0
		unit_type				light infantry					0.7
		unit_type				skirmish infantry				0.7
		unit_type				heavy cavalry					0.7
		unit_type				light cavalry					0.7
		unit_type				skirmish cavalry				0.7
		unit_type				any								0.0
		block_formation			line
		block_relative_pos		0 -5.0 0.0
		inter_unit_spacing		2.0
		priority				0.9
	end_block

	;;; melee troops to left of flank shooters
	begin_block 2
		min_units				0
		max_units				2
		unit_type				heavy infantry					1.0
		unit_type				light infantry					0.7
		unit_type				skirmish infantry				0.7
		unit_type				heavy cavalry					0.7
		unit_type				light cavalry					0.7
		unit_type				skirmish cavalry				0.7
		unit_type				any								0.0
		block_formation			line
		block_relative_pos		0 5.0 0.0
		inter_unit_spacing		2.0
		priority				0.9
	end_block

	;;; everyone else in the second line
	begin_block 3
		unit_type				any								1.0
		block_formation			line
		block_relative_pos		0 0.0 -10.0
		inter_unit_spacing		2.0
		priority				0.5
	end_block

end_formation











;****************************************************************
; Wall Assault*EAST CULTURE*
; Siege engine in the centre, covering troops on the flanks
; other units in a column behind, waiting to go up the siege tower
;****************************************************************


begin_formation ai_wall_assault1

	wall_assault_force
	ai_priority					0.5								;; priority low, so we only choose if the flag is set
        supported_factions			 carthage, parthia, numidia, pontus, armenia 
	;;; gap for siege engines in the centre
	begin_dummy_block 0											;; centre slot left empty for assault column to pass through
		spacer 0.0 0.0 35 20
	end_dummy_block

	;;; Infantry to the rear of siege engine 
	begin_block 1
                not_general
		unit_type			heavy infantry				1.0
		unit_type				light infantry				0.5
                ;unit_type				phalanx				0.3
                unit_type				infantry				0.05
                unit_type				any				0.02
                ;default_melee_state	skirmish
                unit_formation          phalanx
                ;unit_density			close
		;max_unit_width			20
		block_formation			column
		block_relative_pos		0 0.0 -35.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block


	;;; all other units behind the siege engine 
	begin_block 2
                not_general
                unit_type			non_phalanx_spear				1.0
		unit_type				heavy infantry				0.5
                unit_type				phalanx				0.5
                unit_type				infantry				0.05
                unit_type				any				0.02
                unit_formation          phalanx
		;unit_density			close
		;max_unit_width			20
		block_formation			column
		block_relative_pos		1 5.0 0.0
		inter_unit_spacing		0.2
		priority				0.3
	end_block

        ;;; all other units behind the siege engine 
	begin_block 3
                not_general
                unit_type			non_phalanx_spear				1.0
		unit_type				heavy infantry				0.5
                unit_type				phalanx				0.5
                unit_type				infantry				0.05
                unit_type				any				0.02
                unit_formation          phalanx
		;unit_density			close
		;max_unit_width			20
		block_formation			column
		block_relative_pos		1 -5.0 0.0
		inter_unit_spacing		0.2
		priority				0.3
	end_block


        begin_dummy_block 4
		spans					1 2 3 
	end_dummy_block

	;;; special general block
	begin_block 5
		min_units				1
		;max_units				1
		unit_type				general_unit			1.0
                ;default_melee_state	skirmish
                ;unit_formation          square, wedge
		;unit_density			close
		block_formation			line
		block_relative_pos		4 0 -10.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

end_formation



;****************************************************************
; Siege deployment*EAST CULTURE*
; The engines have already been assigned at this point
; Put rams in the centre front, other engines at the front either side
;****************************************************************

begin_formation deployment_siege1

	standard_siege_attacker_deployment
	ai_priority													0.5
        supported_factions			 carthage, parthia, numidia, pontus, armenia 

	;;; all engines at the center
	begin_block 0
		unit_type				carrying_siege_engine ram		1.0
                unit_type				carrying_siege_engine tower		0.8
                unit_type				carrying_siege_engine ladder	0.6
		;unit_density			close
		;max_unit_width			20
		block_formation			line
		block_relative_pos		0 0.0 0.0
		inter_unit_spacing		20.0
		priority				1.0
	end_block


	;; other infantry (back)
	begin_block 1
                not_general
		unit_type			heavy infantry				1.0
		unit_type				non_phalanx_spear				0.5
                unit_type				light infantry				0.3
                unit_type				infantry				0.05
                unit_type				any				0.02
                ;default_melee_state	defend
                unit_formation          square
		;unit_density			close
		;max_unit_width			20
                block_formation			line
		block_relative_pos		0 0.0 -7.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

        ;; other infantry (back)(more)
	begin_block 2
                not_general
		unit_type			non_phalanx_spear				0.5
		unit_type				heavy infantry				0.3
                unit_type				phalanx				1.0
                unit_type				infantry				0.05
                unit_type				any				0.02
                ;default_melee_state	defend
                unit_formation          square
		;unit_density			close
		;max_unit_width			20
                block_formation			line
		block_relative_pos		1 0.0 -7.0
		inter_unit_spacing		0.2
		priority				0.7
	end_block

        ;; other infantry (back)(more)(missile)
	begin_block 3
                not_general
		unit_type				missile infantry				1.0
                unit_type				infantry				0.05
                unit_type				any				0.02
                ;default_melee_state	defend
                unit_formation          square
		;unit_density			close
		;max_unit_width			20
                block_formation			line
		block_relative_pos		2 0.0 -15.0
		inter_unit_spacing		0.2
		priority				0.7
	end_block
        
	begin_dummy_block 4
		spans 1 2 3 
	end_dummy_block

	;;; archers behind to give support
	begin_block 5
                not_general
		unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type					ranged_missile_infantry				2.0
                ;default_melee_state	skirmish
                unit_formation          square
		block_formation			line
		block_relative_pos		4 0.0 -15.0
		inter_unit_spacing		5.0
		priority				0.5
	end_block

        
	begin_dummy_block 6
		spans 1 2 3 4 5 
	end_dummy_block

	;;; cavalry at the back
	begin_block 7
                not_general
		unit_type				heavy cavalry					1.0
		unit_type				light cavalry					1.0
		unit_type				skirmish cavalry				1.0
		unit_type				any								0.1
                unit_formation          square
		;unit_density			close
		block_formation			line
		block_relative_pos		6 0.0 -25.0
		inter_unit_spacing		0.2
		priority				0.9
	end_block

begin_dummy_block 8
		spans					1 2 3 4 5 6 7  
	end_dummy_block

	;;; special general block
	begin_block 9
		min_units				1
		;max_units				1
		unit_type				general_unit			1.0
                ;default_melee_state	skirmish
                ;unit_formation          square, wedge
		;unit_density			close
		block_formation			line
		block_relative_pos		8 0 -5.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

end_formation


;****************************************************************
; Wall Assault*BARBARIAN CULTURE*
; Siege engine in the centre, covering troops on the flanks
; other units in a column behind, waiting to go up the siege tower
;****************************************************************


begin_formation ai_wall_assault2

	wall_assault_force
	ai_priority					0.5								;; priority low, so we only choose if the flag is set
        supported_factions			 scythia, slave, spain, gauls, britons, dacia, germans

	;;; gap for siege engines in the centre
	begin_dummy_block 0											;; centre slot left empty for assault column to pass through
		spacer 0.0 0.0 35 20
	end_dummy_block

	;;; archers to the rear of siege engine
	begin_block 1
                max_units				1
                not_general
		unit_type				missile infantry				1.0
		unit_type				missile cavalry					0.3
		unit_type				heavy infantry					0.1
		unit_type				any								0.0
                ;default_melee_state	skirmish
                unit_formation          phalanx
		block_formation			line
		block_relative_pos		0 0.0 -20.0
		inter_unit_spacing		0.2
		priority				1
	end_block


	;;; all other units behind the siege engine
	begin_block 2
		max_units				2
                not_general
                unit_type				heavy infantry					1.0
		unit_type				spearmen infantry								0.5
                unit_type				any				0.02
                unit_formation          phalanx
		;unit_density			close
		block_formation			line
		block_relative_pos		1 0.0 -20.0
		inter_unit_spacing		0.2
		priority				0.7
	end_block

	begin_block 3
		max_units				2
                not_general
		unit_type				any								0.5
                unit_formation          phalanx
		;unit_density			close
		block_formation			line
		block_relative_pos		2 0.0 -6.0
		inter_unit_spacing		0.2
		priority				0.1
	end_block

	begin_block 4
		max_units				2
                not_general
		unit_type				any								0.5
                unit_formation          phalanx
		;unit_density			close
		block_formation			line
		block_relative_pos		3 0.0 -6.0
		inter_unit_spacing		0.2
		priority				0.1
	end_block

	begin_block 5
                not_general
		unit_type				any								0.5
                unit_formation          phalanx
		;unit_density			close
		block_formation			line
		block_relative_pos		4 0.0 -15.0
		inter_unit_spacing		0.2
		priority				0.1
	end_block

        begin_dummy_block 6
		spans					1 2 3 4 5
	end_dummy_block

	;;; special general block
	begin_block 7
		min_units				1
		;max_units				1
		unit_type				general_unit			1.0
                ;default_melee_state	skirmish
                ;unit_formation          square, wedge
		;unit_density			close
		block_formation			line
		block_relative_pos		6 0 -10.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

end_formation



;****************************************************************
; Siege deployment*BARBARIAN CULTURE*
; The engines have already been assigned at this point
; Put rams in the centre front, other engines at the front either side
;****************************************************************

begin_formation deployment_siege2

	standard_siege_attacker_deployment
	ai_priority													0.5
        supported_factions			 scythia, slave, spain, gauls, britons, dacia, germans

	;;; rams at the centre
	begin_block 0
		unit_type				carrying_siege_engine ram		1.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 0.0 0.0
		inter_unit_spacing		20.0
		priority				1.0
	end_block

	;; other engines left side
	begin_block 1
		unit_type				carrying_siege_engine ladder	1.0
		unit_type				carrying_siege_engine tower		1.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 -10.0 0.0
		inter_unit_spacing		20.0
		priority				1.0
	end_block

	;; other engines right side
	begin_block 2
		unit_type				carrying_siege_engine ladder	1.0
		unit_type				carrying_siege_engine tower		1.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 10.0 0.0
		inter_unit_spacing		20.0
		priority				1.0
	end_block

        begin_dummy_block 3
		spans 0 1 2 
	end_dummy_block

	;; other infantry (back)
	begin_block 4
                not_general
		unit_type				heavy infantry					0.7
		unit_type				light infantry					0.7
		unit_type				skirmish infantry				0.1
                ;default_melee_state	defend
                unit_formation          square
		block_formation			line
		block_relative_pos		3 0.0 -7.0
		inter_unit_spacing		0.2
		priority				0.6
	end_block

        ;; other infantry (back)(more)
	begin_block 5
                not_general
		unit_type				heavy infantry					0.7
		unit_type				light infantry					0.7
		unit_type				skirmish infantry				0.1
                ;default_melee_state	defend
                unit_formation          square
		block_formation			line
		block_relative_pos		4 0.0 -7.0
		inter_unit_spacing		0.2
		priority				0.6
	end_block

        

	begin_dummy_block 6
		spans 1 2 3 4 5
	end_dummy_block

	;;; archers behind to give support
	begin_block 7
                not_general
		unit_type				missile infantry				1.0
                ;default_melee_state	skirmish
                unit_formation          square
                ;unit_density			loose
		block_formation			line
		block_relative_pos		6 0.0 -45.0
		inter_unit_spacing		0.2
		priority				0.9
	end_block

	;;; cavalry at the back
	begin_block 8
                not_general
		unit_type				heavy cavalry					1.0
		unit_type				light cavalry					1.0
		unit_type				skirmish cavalry				1.0
		unit_type				any								0.1
                unit_formation          square
		;unit_density			close
		block_formation			line
		block_relative_pos		7 0.0 -15.0
		inter_unit_spacing		0.2
		priority				0.9
	end_block

begin_dummy_block 9
		spans					1 2 3 4 5 6 7 8 
	end_dummy_block

	;;; special general block
	begin_block 10
		min_units				1
		;max_units				1
		unit_type				general_unit			1.0
                ;unit_formation          square, wedge
                ;default_melee_state	skirmish
		;unit_density			close
		block_formation			line
		block_relative_pos		8 0 -8.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

end_formation


;****************************************************************
; Wall Assault*ROMAN CULTURE*
; Siege engine in the centre, covering troops on the flanks
; other units in a column behind, waiting to go up the siege tower
;****************************************************************


begin_formation ai_wall_assault3

	wall_assault_force
	ai_priority					0.5								;; priority low, so we only choose if the flag is set
        supported_factions			 romans_julii, romans_brutii, romans_scipii, romans_senate 

	;;; gap for siege engines in the centre
	begin_dummy_block 0											;; centre slot left empty for assault column to pass through
		spacer 0.0 0.0 35 20
	end_dummy_block

	;;; Legions to the rear of siege engine in long maniples
	begin_block 1
                not_general
		unit_type			heavy_pilum_infantry 1.0				
		unit_type			light_pilum_infantry 0.5					
		unit_type				heavy infantry					0.1
		unit_type				any								0.0
                ;default_melee_state	skirmish
                unit_formation          phalanx
                ;unit_density			close
		max_unit_width			20
		block_formation			line
		block_relative_pos		0 0.0 -25.0
		inter_unit_spacing		10.0
		priority				1.0
	end_block


	;;; all other units behind the siege engine in long maniple formation
	begin_block 2
                not_general
                unit_type				heavy infantry					1.0
		unit_type				light infantry								0.5
                unit_type				infantry				0.05
                unit_type				any				0.02
                unit_formation          phalanx
		;unit_density			close
		max_unit_width			20
		block_formation			line
		block_relative_pos		1 0.0 -5.0
		inter_unit_spacing		10.0
		priority				0.3
	end_block

	begin_block 3
                not_general
		unit_type				any								0.5
                unit_formation          phalanx
		;unit_density			close
		max_unit_width			20
		block_formation			line
		block_relative_pos		2 0.0 -6.0
		inter_unit_spacing		10.0
		priority				0.1
	end_block

	begin_block 4
                not_general
		unit_type				any								0.5
                unit_formation          phalanx
		;unit_density			close
		max_unit_width			20
		block_formation			line
		block_relative_pos		3 0.0 -6.0
		inter_unit_spacing		10.0
		priority				0.05
	end_block


        begin_dummy_block 5
		spans					1 2 3 4 
	end_dummy_block

	;;; special general block
	begin_block 6
		min_units				1
		;max_units				1
		unit_type				general_unit			1.0
                ;unit_formation          square, wedge
                ;default_melee_state	skirmish
		;unit_density			close
		block_formation			line
		block_relative_pos		5 0 -10.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

end_formation



;****************************************************************
; Siege deployment*ROMAN CULTURE*
; The engines have already been assigned at this point
; Put rams in the centre front, other engines at the front either side
;****************************************************************

begin_formation deployment_siege3

	standard_siege_attacker_deployment
	ai_priority													0.5
        supported_factions			 romans_julii, romans_brutii, romans_scipii, romans_senate 

	;;; rams at the centre
	begin_block 0
		unit_type				carrying_siege_engine ram		1.0
		;unit_density			close
		max_unit_width			20
		block_formation			line
		block_relative_pos		0 0.0 0.0
		inter_unit_spacing		10.0
		priority				1.0
	end_block

	;; other engines left side 
	begin_block 1
		unit_type				carrying_siege_engine tower		1.0
                ;unit_type				carrying_siege_engine ladder	1.0
		;unit_density			close
		max_unit_width			20
		block_formation			line
		block_relative_pos		0 -20.0 0.0
		inter_unit_spacing		10.0
		priority				1.0
	end_block

	;; other engines right side 
	begin_block 2
                ;unit_type				carrying_siege_engine tower		1.0
		unit_type				carrying_siege_engine ladder	1.0
		;unit_density			close
		max_unit_width			20
		block_formation			line
		block_relative_pos		0 20.0 0.0
		inter_unit_spacing		10.0
		priority				1.0
	end_block


	;; other infantry (back)
	begin_block 3
                not_general
		unit_type			heavy_pilum_infantry 1.0				1.0
		unit_type			light_pilum_infantry 0.5					0.3
		unit_type				heavy infantry				0.1
                unit_type				infantry				0.05
                unit_type				any				0.02
                unit_formation          square
                ;default_melee_state	defend
		;unit_density			close
		max_unit_width			20
                block_formation			line
		block_relative_pos		0 0.0 -7.0
		inter_unit_spacing		10.0
		priority				0.7
	end_block

        ;; other infantry (back)(more)
	begin_block 4
                not_general
		unit_type			heavy_pilum_infantry 1.0				1.0
		unit_type			light_pilum_infantry 0.5					0.3
		unit_type				heavy infantry				0.1
                unit_type				infantry				0.05
                unit_type				any				0.02
                ;default_melee_state	defend
                unit_formation          square
		;unit_density			close
		max_unit_width			20
                block_formation			line
		block_relative_pos		1 0.0 -7.0
		inter_unit_spacing		10.0
		priority				0.7
	end_block

        ;; other infantry (back)
	begin_block 5
                not_general
		unit_type			heavy_pilum_infantry 1.0				1.0
		unit_type			light_pilum_infantry 0.5					0.3
		unit_type				heavy infantry				0.1
                unit_type				infantry				0.05
                unit_type				any				0.02
                ;default_melee_state	defend
                unit_formation          square
		;unit_density			close
		max_unit_width			20
                block_formation			line
		block_relative_pos		2 0.0 -7.0
		inter_unit_spacing		10.0
		priority				0.7
	end_block

        

	begin_dummy_block 6
		spans 1 2 3 4 5
	end_dummy_block

	;;; archers behind to give support
	begin_block 7
                not_general
		unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type					ranged_missile_infantry				2.0
                ;default_melee_state	skirmish
                unit_formation          square
		block_formation			line
		block_relative_pos		6 0.0 -15.0
		inter_unit_spacing		5.0
		priority				0.9
	end_block

        
	begin_dummy_block 8
		spans 1 2 3 4 5 6 7
	end_dummy_block

	;;; cavalry at the back
	begin_block 9
                not_general
		unit_type				heavy cavalry					1.0
		unit_type				light cavalry					1.0
		unit_type				skirmish cavalry				1.0
		unit_type				any								0.1
                unit_formation          square
		;unit_density			close
		block_formation			line
		block_relative_pos		8 0.0 -5.0
		inter_unit_spacing		0.2
		priority				0.9
	end_block

begin_dummy_block 10
		spans					1 2 3 4 5 6 7 8 
	end_dummy_block

	;;; special general block
	begin_block 11
		min_units				1
		;max_units				1
		unit_type				general_unit			1.0
                ;unit_formation          square, wedge
                ;default_melee_state	skirmish
		;unit_density			close
		block_formation			line
		block_relative_pos		9 0 -5.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

end_formation

;****************************************************************
; Wall Assault*GREEK CULTURE*
; Siege engine in the centre, covering troops on the flanks
; other units in a column behind, waiting to go up the siege tower
;****************************************************************


begin_formation ai_wall_assault4

	wall_assault_force
	ai_priority					0.5								;; priority low, so we only choose if the flag is set
        supported_factions			 greek_cities, macedon, egypt, seleucid, thrace 
	;;; gap for siege engines in the centre
	begin_dummy_block 0											;; centre slot left empty for assault column to pass through
		spacer 0.0 0.0 35 20
	end_dummy_block

	;;; Infantry to the rear of siege engine 
	begin_block 1
                not_general
		unit_type			heavy infantry				1.0
		unit_type				non_phalanx_spear				0.8
                ;unit_type				phalanx				0.3
                unit_type				infantry				0.05
                unit_type				any				0.02
                ;default_melee_state	skirmish
                unit_formation          phalanx
                ;unit_density			close
		;max_unit_width			20
		block_formation			column
		block_relative_pos		0 0.0 -25.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block


	;;; all other units behind the siege engine 
	begin_block 2
                not_general
                unit_type			non_phalanx_spear				1.0
		unit_type				heavy infantry				0.5
                unit_type				phalanx				0.5
                unit_type				infantry				0.05
                unit_type				any				0.02
                unit_formation          phalanx
		;unit_density			close
		;max_unit_width			20
		block_formation			column
		block_relative_pos		1 5.0 0.0
		inter_unit_spacing		0.2
		priority				0.3
	end_block

        ;;; all other units behind the siege engine 
	begin_block 3
                not_general
                unit_type			non_phalanx_spear				0.3
		unit_type				heavy infantry				0.2
                unit_type				phalanx				1.0
                unit_type				infantry				0.05
                unit_type				any				0.02
                unit_formation          phalanx
		;unit_density			close
		;max_unit_width			20
		block_formation			column
		block_relative_pos		1 -5.0 0.0
		inter_unit_spacing		0.2
		priority				0.3
	end_block


        begin_dummy_block 4
		spans					1 2 3 
	end_dummy_block

	;;; special general block
	begin_block 5
		min_units				1
		;max_units				1
		unit_type				general_unit			1.0
                ;unit_formation          square, wedge
                ;default_melee_state	skirmish
		;unit_density			close
		block_formation			line
		block_relative_pos		4 0 -10.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

end_formation



;****************************************************************
; Siege deployment*GREEK CULTURE*
; The engines have already been assigned at this point
; Put rams in the centre front, other engines at the front either side
;****************************************************************

begin_formation deployment_siege4

	standard_siege_attacker_deployment
	ai_priority													0.5
        supported_factions			 greek_cities, macedon, egypt, seleucid, thrace 

	;;; all engines at the center
	begin_block 0
		unit_type				carrying_siege_engine ram		1.0
                unit_type				carrying_siege_engine tower		0.8
                unit_type				carrying_siege_engine ladder	0.6
		;unit_density			close
		;max_unit_width			20
		block_formation			line
		block_relative_pos		0 0.0 0.0
		inter_unit_spacing		10.0
		priority				1.0
	end_block


	;; other infantry (back)
	begin_block 1
                not_general
		unit_type			heavy infantry				1.0
		unit_type				non_phalanx_spear				0.8
                unit_type				light infantry				0.3
                unit_type				infantry				0.05
                unit_type				any				0.02
                ;default_melee_state	defend
                unit_formation          square
		;unit_density			close
		;max_unit_width			20
                block_formation			line
		block_relative_pos		0 0.0 -7.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

        ;; other infantry (back)(more)
	begin_block 2
                not_general
		unit_type			non_phalanx_spear				0.2
		unit_type				heavy infantry				0.1
                unit_type				phalanx				1.0
                unit_type				infantry				0.05
                unit_type				any				0.02
                ;default_melee_state	defend
                unit_formation          square
		;unit_density			close
		;max_unit_width			20
                block_formation			line
		block_relative_pos		1 0.0 -7.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

        ;; other infantry (back)(more)(missile)
	begin_block 3
                not_general
		unit_type				missile infantry				1.0
                unit_type				infantry				0.05
                unit_type				any				0.02
                unit_formation          square
                ;default_melee_state	defend
		;unit_density			close
		;max_unit_width			20
                block_formation			line
		block_relative_pos		2 0.0 -7.0
		inter_unit_spacing		0.2
		priority				0.7
	end_block
        
	begin_dummy_block 4
		spans 1 2 3 
	end_dummy_block

	;;; archers behind to give support
	begin_block 5
                not_general
		unit_type					handler				1.0
		unit_type					siege				3.0
		unit_type					chanting_screeching	3.0
                unit_type					ranged_missile_infantry				2.0
                unit_formation          square
                ;default_melee_state	skirmish
		block_formation			line
		block_relative_pos		4 0.0 -45.0
		inter_unit_spacing		5.0
		priority				0.5
	end_block

        
	begin_dummy_block 6
		spans 1 2 3 4 5 
	end_dummy_block

	;;; cavalry at the back
	begin_block 7
                not_general
		unit_type				heavy cavalry					1.0
		unit_type				light cavalry					1.0
		unit_type				skirmish cavalry				1.0
		unit_type				any								0.1
                unit_formation          square
		;unit_density			close
		block_formation			line
		block_relative_pos		6 0.0 -25.0
		inter_unit_spacing		0.2
		priority				0.9
	end_block

begin_dummy_block 8
		spans					1 2 3 4 5 6 7  
	end_dummy_block

	;;; special general block
	begin_block 9
		min_units				1
		;max_units				1
		unit_type				general_unit			1.0
                ;unit_formation          square, wedge
                ;default_melee_state	skirmish
		;unit_density			close
		block_formation			line
		block_relative_pos		8 0 -5.0
		inter_unit_spacing		0.2
		priority				1.0
	end_block

end_formation


;****************************************************************
; Wall Assault
; Siege engine in the centre, covering troops on the flanks
; other units in a column behind, waiting to go up the siege tower
;****************************************************************


begin_formation ai_wall_assault

	wall_assault_force
	ai_priority					0.000000000001								;; priority low, so we only choose if the flag is set

	;;; gap for siege engines in the centre
	begin_dummy_block 0											;; centre slot left empty for assault column to pass through
		spacer 0.0 0.0 35 20
	end_dummy_block

	;;; archers to the left of siege engine
	begin_block 1
		unit_type				missile infantry				1.0
		unit_type				missile cavalry					0.8
		unit_type				heavy infantry					0.1
		unit_type				any								0.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 -5.0 0.0
		inter_unit_spacing		2.0
		priority				1
	end_block

	;;; archers to the right of siege engine
	begin_block 2
		unit_type				missile infantry				1.0
		unit_type				missile cavalry					0.8
		unit_type				heavy infantry					0.1
		unit_type				any								0.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 5.0 0.0
		inter_unit_spacing		2.0
		priority				1
	end_block

	;;; all other units behind the siege engine
	begin_block 3
		max_units				3
		unit_type				any								0.5
		;unit_density			close
		block_formation			line
		block_relative_pos		0 0.0 -10.0
		inter_unit_spacing		2.0
		priority				0.7
	end_block

	begin_block 4
		max_units				3
		unit_type				any								0.5
		;unit_density			close
		block_formation			line
		block_relative_pos		3 0.0 -5.0
		inter_unit_spacing		2.0
		priority				0.1
	end_block

	begin_block 5
		max_units				3
		unit_type				any								0.5
		;unit_density			close
		block_formation			line
		block_relative_pos		4 0.0 -5.0
		inter_unit_spacing		2.0
		priority				0.1
	end_block

	begin_block 6
		unit_type				any								0.5
		;unit_density			close
		block_formation			line
		block_relative_pos		5 0.0 -5.0
		inter_unit_spacing		2.0
		priority				0.1
	end_block

end_formation



;****************************************************************
; Siege deployment
; The engines have already been assigned at this point
; Put rams in the centre front, other engines at the front either side
;****************************************************************

begin_formation deployment_siege

	standard_siege_attacker_deployment
	ai_priority													0.000000000001

	;;; rams at the centre
	begin_block 0
		unit_type				carrying_siege_engine ram		1.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 0.0 0.0
		inter_unit_spacing		8.0
		priority				1.0
	end_block

	;; other engines left side
	begin_block 1
		unit_type				carrying_siege_engine ladder	1.0
		unit_type				carrying_siege_engine tower		1.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 -8.0 0.0
		inter_unit_spacing		8.0
		priority				1.0
	end_block

	;; other infantry left side
	begin_block 2
		unit_type				heavy infantry					0.7
		unit_type				light infantry					0.7
		unit_type				skirmish infantry				0.7
		;unit_density			close
		block_formation			line
		block_relative_pos		1 -8.0 0.0
		inter_unit_spacing		8.0
		priority				0.5
	end_block

	;; other engines right side
	begin_block 3
		unit_type				carrying_siege_engine ladder	1.0
		unit_type				carrying_siege_engine tower		1.0
		;unit_density			close
		block_formation			line
		block_relative_pos		0 8.0 0.0
		inter_unit_spacing		8.0
		priority				1.0
	end_block

	;; other infantry rightt side
	begin_block 4
		unit_type				heavy infantry					0.7
		unit_type				light infantry					0.7
		unit_type				skirmish infantry				0.7
		;unit_density			close
		block_formation			line
		block_relative_pos		3 8.0 0.0
		inter_unit_spacing		8.0
		priority				0.5
	end_block

	begin_dummy_block 5
		spans 0 1 2 3 4
	end_dummy_block

	;;; archers behind to give support
	begin_block 6
		unit_type				missile infantry				1.0
		;unit_density			close
		block_formation			line
		block_relative_pos		5 0.0 -10.0
		inter_unit_spacing		2.0
		priority				0.1
	end_block

	;;; cavalry at the back
	begin_block 7
		unit_type				heavy cavalry					1.0
		unit_type				light cavalry					1.0
		unit_type				skirmish cavalry				1.0
		unit_type				any								0.1
		;unit_density			close
		block_formation			line
		block_relative_pos		6 0.0 -10.0
		inter_unit_spacing		2.0
		priority				0.1
	end_block

end_formation

;****************************************************************
; Ambush deployment
; Column marching formation for the army being ambushed
;****************************************************************
	
begin_formation ambush_defender_deployment

	standard_ambush_defender_deployment
	ai_priority 0.1

	;;; general at the front
	begin_block 0
		min_units				1
		max_units				1
		unit_type				general_unit			1.0
                ;default_melee_state	skirmish
		;unit_density			close
		max_unit_width			4
		block_formation			line
		block_relative_pos		0 0.0 0.0
		inter_unit_spacing		2.0
		priority				1.0
	end_block

	;;; all other units behind
	begin_block 1
		unit_type				any					1.0
		;unit_density			close
		max_unit_width			4
		block_formation			column
		block_relative_pos		0 0.0 -2.0
		inter_unit_spacing		2.0
		priority				1.0
	end_block

        ;;; all other units behind(2)
	begin_block 2
		unit_type				any					1.0
		;unit_density			close
		max_unit_width			4
		block_formation			column
		block_relative_pos		0 2.0 0.0
		inter_unit_spacing		2.0
		priority				1.0
	end_block


end_formation